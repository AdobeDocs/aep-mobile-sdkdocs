"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[8931],{59148:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return h}});var a=n(87462),o=n(63366),r=(n(15007),n(64983)),i=n(91515),s=["components"],l={},d=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",t)}},c=d("CodeBlock"),p=d("InlineAlert"),u={_frontmatter:l},m=i.Z;function h(e){var t=e.components,n=(0,o.Z)(e,s);return(0,r.mdx)(m,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"fetch-and-display-content-cards"},"Fetch and Display Content Cards"),(0,r.mdx)("p",null,"This tutorial explains how to fetch and display content cards in your application."),(0,r.mdx)("h2",{id:"pre-requisites"},"Pre-requisites"),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"../../../index.md#implement-extension-in-mobile-app"},"Integrate and register the AEPMessaging extension")," in your app."),(0,r.mdx)("h2",{id:"fetch-content-cards"},"Fetch Content Cards"),(0,r.mdx)("p",null,"To fetch the content cards for the surfaces configured in ",(0,r.mdx)("a",{parentName:"p",href:"https://business.adobe.com/products/journey-optimizer/adobe-journey-optimizer.html"},"Adobe Journey Optimizer")," campaigns, call the ",(0,r.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/client-sdks/edge/adobe-journey-optimizer/code-based/api-reference/#updatepropositionsforsurfaces"},"updatePropositionsForSurfaces")," API. You should batch requests for multiple surfaces in a single API call when possible. The returned content cards are cached in-memory by the Messaging extension and persist through the application's lifecycle."),(0,r.mdx)(c,{slots:"heading, code",repeat:"1",languages:"Swift",mdxType:"CodeBlock"}),(0,r.mdx)("h4",{id:"swift"},"Swift"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},'let homePageSurface = Surface(path: "homepage")\nMessaging.updatePropositionsForSurfaces([homePageSurface])\n')),(0,r.mdx)("h2",{id:"retrieve-content-cards"},"Retrieve Content Cards"),(0,r.mdx)("p",null,"To retrieve the content cards for a specific surface, call ",(0,r.mdx)("inlineCode",{parentName:"p"},"getContentCardsUI"),". This API returns an array of ",(0,r.mdx)("a",{parentName:"p",href:"../public-classes/contentcardui.md"},"ContentCardUI")," objects representing content cards for which the user is qualified."),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"ContentCardUI")," objects are created only for content cards with templates recognized by the Messaging extension. The array of ",(0,r.mdx)("inlineCode",{parentName:"p"},"ContentCardUI")," objects may contain multiple content card template types."),(0,r.mdx)(c,{slots:"heading, code",repeat:"1",languages:"Swift",mdxType:"CodeBlock"}),(0,r.mdx)("h4",{id:"swift-1"},"Swift"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},'let homePageSurface = Surface(path: "homepage")\nMessaging.getContentCardsUI(surface: homePageSurface) { result in\n    switch result {\n    case .success(let contentCards):\n        // use the contentCards array to display content cards in your application\n    case .failure(let error):\n        // handle error here\n    }\n}\n')),(0,r.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"Note - Only content cards for which the user has qualified are returned by the getContentCardUI API. User qualification is determined by the delivery rules configured in Adobe Journey Optimizer."),(0,r.mdx)("h2",{id:"display-content-cards"},"Display Content Cards"),(0,r.mdx)("p",null,"To display content cards in your app, use the ",(0,r.mdx)("inlineCode",{parentName:"p"},"ContentCardUI")," objects returned by the ",(0,r.mdx)("inlineCode",{parentName:"p"},"getContentCardsUI")," API. The ",(0,r.mdx)("inlineCode",{parentName:"p"},"ContentCardUI")," objects provide the user interface for templated content cards in your application. Whether your application is built using SwiftUI or UIKit, you can seamlessly incorporate and display these content cards using the ",(0,r.mdx)("inlineCode",{parentName:"p"},"ContentCardUI")," objects."),(0,r.mdx)("h3",{id:"swiftui-application"},"SwiftUI Application"),(0,r.mdx)("p",null,"Below is an example of how to display content cards in a SwiftUI application:"),(0,r.mdx)(c,{slots:"heading, code",repeat:"1",languages:"Swift",mdxType:"CodeBlock"}),(0,r.mdx)("h4",{id:"swift-2"},"Swift"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},'struct HomePage: View {\n    \n    @State var savedCards : [ContentCardUI] = []\n    \n    var body: some View {\n        ScrollView (.vertical, showsIndicators: false) {\n            LazyVStack(spacing: 20) {\n                 ForEach(savedCards) { card in\n                     card.view\n                         .frame(height: 120)\n                }\n            }\n        }\n        .padding()\n        .onAppear() {\n            // Retrieve the content cards for the homepage surface\n            let homePageSurface = Surface(path: "homepage")\n            AEPSwiftUI.getContentCardsUI(for: homePageSurface) { result in\n                switch result {\n                case .success(let cards):\n                    savedCards = cards\n                    \n                case .failure(let error):\n                    // handle error here\n                }\n            }\n        }\n    }\n}\n')),(0,r.mdx)("p",null,"Refer to this ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aepsdk-messaging-ios/tree/main/TestApps/MessagingDemoAppSwiftUI"},"TestApp")," for a complete example of how to display, customize and listen to UI events from content cards in a SwiftUI application."),(0,r.mdx)("h3",{id:"uikit-application"},"UIKit Application"),(0,r.mdx)("p",null,"Below is an example of how to display content cards in a UIKit application using a UITableView:"),(0,r.mdx)(c,{slots:"heading, code",repeat:"1",languages:"Swift",mdxType:"CodeBlock"}),(0,r.mdx)("h4",{id:"swift-3"},"Swift"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},'class HomeViewController: UIViewController, UITableViewDelegate, UITableViewDataSource {\n    \n    @IBOutlet var tableView : UITableView!\n    var savedCards : [ContentCardUI] = []\n        \n    override func viewDidLoad() {\n        super.viewDidLoad()\n        tableView.delegate = self\n        tableView.dataSource = self\n        \n        // Retrieve the content cards for the homepage surface\n        let homePageSurface = Surface(path: "homepage")\n        AEPSwiftUI.getContentCardsUI(for: homePageSurface) { result in\n            switch result {\n            case .success(let cards):\n                self.savedCards = cards\n                DispatchQueue.main.async {\n                    self.tableView.reloadData()\n                }\n                \n            case .failure(let error):\n                // handle error here\n            }\n        }\n    }\n    \n    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {\n        let cell = tableView.dequeueReusableCell(withIdentifier: "cell", for: indexPath)\n        cell.contentView.subviews.forEach { $0.removeFromSuperview() }\n\n        // Get the SwiftUI view for the content card\n        let contentCard = savedCards[indexPath.row]\n        let swiftUIView = contentCard.view\n\n        // Wrap the SwiftUI view in a UIHostingController\n        let hostingController = UIHostingController(rootView: swiftUIView)\n        hostingController.view.translatesAutoresizingMaskIntoConstraints = false\n\n        // Add the hosting controller\'s view to the cell\'s content view\n        cell.contentView.addSubview(hostingController.view)\n\n        // Set up constraints to make the SwiftUI view fill the cell\n        NSLayoutConstraint.activate([\n            hostingController.view.leadingAnchor.constraint(equalTo: cell.contentView.leadingAnchor, constant: 10),\n            hostingController.view.trailingAnchor.constraint(equalTo: cell.contentView.trailingAnchor, constant: -10),\n            hostingController.view.topAnchor.constraint(equalTo: cell.contentView.topAnchor, constant: 10),\n            hostingController.view.bottomAnchor.constraint(equalTo: cell.contentView.bottomAnchor, constant: -10)\n        ])\n\n        return cell\n    }\n    \n    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n        return savedCards.count\n    }\n    \n    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {\n        return 120\n    }\n}\n')),(0,r.mdx)("p",null,"Refer to this ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aepsdk-messaging-ios/tree/main/TestApps/MessagingDemoAppObjC"},"TestApp")," for a complete example of how to display, customize, and listen to UI events from content cards in a UIKit application."))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-edge-adobe-journey-optimizer-content-card-ui-i-os-tutorial-displaying-content-cards-md-5781eda33e877c5e8fca.js.map