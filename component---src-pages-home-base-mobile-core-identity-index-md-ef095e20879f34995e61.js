"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[3150,4799],{70908:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return s},default:function(){return x}});var i=t(87462),a=t(63366),o=(t(15007),t(64983)),r=t(91515),d=t(80791),l=["components"],s={},p=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",n)}},m=p("InlineAlert"),u=p("TabsBlock"),c={_frontmatter:s},h=r.Z;function x(e){var n=e.components,t=(0,a.Z)(e,l);return(0,o.mdx)(h,(0,i.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"identity"},"Identity"),(0,o.mdx)("p",null,"The Identity extension enables your app with the Experience Cloud ID (ECID). This service helps with the synchronization of Adobe and other customer identifiers."),(0,o.mdx)(m,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"On web or other platforms, there might situations where this extension might not be required, and the implementation of this SDK extension on mobile apps is required."),(0,o.mdx)("p",null,"To get started with Identity, complete the following steps:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Add the ",(0,o.mdx)("strong",{parentName:"li"},"Identity")," extension to your app."),(0,o.mdx)("li",{parentName:"ol"},"Implement the SDK APIs to complete the following tasks:",(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},"Update customer IDs."),(0,o.mdx)("li",{parentName:"ul"},"Append Adobe visitor data to a URL string."),(0,o.mdx)("li",{parentName:"ul"},"Return customer IDs."),(0,o.mdx)("li",{parentName:"ul"},"Retrieve Experience Cloud IDs."),(0,o.mdx)("li",{parentName:"ul"},"Set advertising IDs."),(0,o.mdx)("li",{parentName:"ul"},"Set the device notification for push notifications.")))),(0,o.mdx)("h2",{id:"add-the-identity-extension-to-your-app"},"Add the Identity extension to your app"),(0,o.mdx)(u,{orientation:"horizontal",slots:"heading, content",repeat:"2",mdxType:"TabsBlock"}),(0,o.mdx)("p",null,"Android"),(0,o.mdx)(d.default,{query:"platform=android&task=add",mdxType:"Tabs"}),(0,o.mdx)("p",null,"iOS"),(0,o.mdx)(d.default,{query:"platform=ios&task=add",mdxType:"Tabs"}),(0,o.mdx)("h2",{id:"register-the-identity-extension"},"Register the Identity extension"),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"MobileCore.registerExtensions()")," API can be used to register the Identity extension with the Mobile Core extension. This API allows the extension to send and receive events to and from the Mobile SDK."),(0,o.mdx)("p",null,"To register the Identity extension, use the following code sample:"),(0,o.mdx)(u,{orientation:"horizontal",slots:"heading, content",repeat:"2",mdxType:"TabsBlock"}),(0,o.mdx)("p",null,"Android"),(0,o.mdx)(d.default,{query:"platform=android&task=register",mdxType:"Tabs"}),(0,o.mdx)("p",null,"iOS"),(0,o.mdx)(d.default,{query:"platform=ios&task=register",mdxType:"Tabs"}),(0,o.mdx)(m,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"Previously known as MCID/MID/MCMID, the Experience Cloud ID (ECID) is a 38 character ID that uniquely identifies each visitor in the Adobe Experience Platform."),(0,o.mdx)("p",null,"After the configuration is complete, an ECID is generated and, where applicable, is included on all Analytics and Audience Manager hits. Other IDs, such as custom and automatically-generated IDs, continue to be sent with each hit."),(0,o.mdx)("h2",{id:"visitor-tracking-between-an-app-and-the-mobile-web"},"Visitor tracking between an app and the mobile web"),(0,o.mdx)("p",null,"If your app opens mobile web content, you need to ensure that visitors are not identified separately as they move between the native and mobile web."),(0,o.mdx)("h3",{id:"visitor-ids-in-apps"},"Visitor IDs in apps"),(0,o.mdx)("p",null,"The Mobile SDK generates a unique visitor ID when the app is installed. This ECID is stored in persistent memory on the mobile device and is sent with every hit. The ECID is removed when the user uninstalls the app or when the user sets the Mobile SDK global privacy status to ",(0,o.mdx)("inlineCode",{parentName:"p"},"optedout"),"."),(0,o.mdx)(m,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"When the Mobile SDK privacy status is set to ",(0,o.mdx)("inlineCode",{parentName:"p"},"optedout"),", and the ECID is removed, a new unique visitor ID (ECID) is generated when the user sets the global privacy status to ",(0,o.mdx)("inlineCode",{parentName:"p"},"optedin"),"."),(0,o.mdx)(m,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"App visitor IDs persist through upgrades."),(0,o.mdx)("h3",{id:"visitor-ids-in-the-mobile-web"},"Visitor IDs in the mobile web"),(0,o.mdx)("p",null,"Typical mobile web implementations use the same standard analytics ",(0,o.mdx)("inlineCode",{parentName:"p"},"s_code.js")," or ",(0,o.mdx)("inlineCode",{parentName:"p"},"AppMeasurement.js")," that is used in desktop sites. The JavaScript libraries have their own methods of generating unique visitor IDs, which causes a different visitor ID to be generated when you open mobile web content from your app."),(0,o.mdx)("p",null,"To use the same visitor ID in the app and mobile web and pass the visitor ID to the mobile web in the URL, complete the following steps:"),(0,o.mdx)("h3",{id:"implementing-visitor-tracking-between-an-app-and-the-mobile-web"},"Implementing visitor tracking between an app and the mobile web"),(0,o.mdx)(u,{orientation:"horizontal",slots:"heading, content",repeat:"2",mdxType:"TabsBlock"}),(0,o.mdx)("p",null,"Android"),(0,o.mdx)(d.default,{query:"platform=android&task=implement",mdxType:"Tabs"}),(0,o.mdx)("p",null,"iOS"),(0,o.mdx)(d.default,{query:"platform=ios&task=implement",mdxType:"Tabs"}),(0,o.mdx)("p",null,"The ID service code on the destination domain extracts the ECID from the URL instead of sending a request to Adobe for a new ID. The ID service code on the destination page uses this ECID to track the visitor. On hits from the mobile web content, verify that the ",(0,o.mdx)("inlineCode",{parentName:"p"},"mid")," parameter exists on each hit, and that this value matches the ",(0,o.mdx)("inlineCode",{parentName:"p"},"mid"),"value that is being sent by the app code."))}x.isMDXComponent=!0},80791:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return l},default:function(){return h}});var i=t(87462),a=t(63366),o=(t(15007),t(64983)),r=t(91515),d=["components"],l={},s=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",n)}},p=s("Variant"),m=s("InlineNestedAlert"),u={_frontmatter:l},c=r.Z;function h(e){var n=e.components,t=(0,a.Z)(e,d);return(0,o.mdx)(c,(0,i.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)(p,{platform:"android",task:"add",repeat:"10",mdxType:"Variant"}),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Add the ",(0,o.mdx)("inlineCode",{parentName:"li"},"Identity")," library to your project using the app's gradle file.")),(0,o.mdx)("h4",{id:"kotlin"},"Kotlin"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-kotlin"},'implementation(platform("com.adobe.marketing.mobile:sdk-bom:3.+"))\nimplementation("com.adobe.marketing.mobile:core")\nimplementation("com.adobe.marketing.mobile:identity")\n')),(0,o.mdx)("h4",{id:"groovy"},"Groovy"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},"implementation platform('com.adobe.marketing.mobile:sdk-bom:3.+')\nimplementation 'com.adobe.marketing.mobile:core'\nimplementation 'com.adobe.marketing.mobile:identity'\n")),(0,o.mdx)(m,{variant:"warning",header:"false",iconPosition:"left",mdxType:"InlineNestedAlert"},(0,o.mdx)("p",null,"Using dynamic dependency versions is ",(0,o.mdx)("strong",{parentName:"p"},"not")," recommended for production apps. Please read the ",(0,o.mdx)("a",{parentName:"p",href:"../../resources/manage-gradle-dependencies.md"},"managing Gradle dependencies guide")," for more information.")),(0,o.mdx)("ol",{start:2},(0,o.mdx)("li",{parentName:"ol"},"Import the Identity and MobileCore extensions in your application's main activity.")),(0,o.mdx)("h4",{id:"java"},"Java"),(0,o.mdx)("p",null,"Import the library:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},"import com.adobe.marketing.mobile.MobileCore;\nimport com.adobe.marketing.mobile.Identity;\n")),(0,o.mdx)(p,{platform:"ios",task:"add",repeat:"7",mdxType:"Variant"}),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Add the Mobile Core and Identity extensions to your project using Cocoapods. Add following pods in your ",(0,o.mdx)("inlineCode",{parentName:"li"},"Podfile"),":")),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-ruby"},"use_frameworks!\ntarget 'YourTargetApp' do\n    pod 'AEPCore', '~> 5.0'\n    pod 'AEPIdentity', '~> 5.0'\nend\n")),(0,o.mdx)("ol",{start:2},(0,o.mdx)("li",{parentName:"ol"},"Import the Identity library.")),(0,o.mdx)("h4",{id:"swift"},"Swift"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-swift"},"import AEPCore\nimport AEPIdentity\n")),(0,o.mdx)("h4",{id:"objective-c"},"Objective-C"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-objectivec"},"@import AEPCore;\n@import AEPIdentity;\n")),(0,o.mdx)(p,{platform:"android",task:"register",repeat:"3",mdxType:"Variant"}),(0,o.mdx)("p",null,"After calling the ",(0,o.mdx)("inlineCode",{parentName:"p"},"setApplication()")," method in the ",(0,o.mdx)("inlineCode",{parentName:"p"},"onCreate()")," method, register the Identity extension."),(0,o.mdx)("h4",{id:"java-1"},"Java"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},"public class MobileApp extends Application {\n@Override\npublic void onCreate() {\nsuper.onCreate();\n     MobileCore.setApplication(this);\n     List<Class<? extends Extension>> extensions = Arrays.asList(Identity.EXTENSION, ...);\n     MobileCore.registerExtensions(extensions, o -> {\n        // Any other post registration processing\n    });\n  }\n}\n")),(0,o.mdx)(p,{platform:"ios",task:"register",repeat:"6",mdxType:"Variant"}),(0,o.mdx)("p",null,"Register the Identity extension in your app's ",(0,o.mdx)("inlineCode",{parentName:"p"},"didFinishLaunchingWithOptions")," function:"),(0,o.mdx)("h4",{id:"swift-1"},"Swift"),(0,o.mdx)("p",null,"When including both Identity and Identity for Edge Network extensions, register the extensions using their full Swift module names, such as ",(0,o.mdx)("inlineCode",{parentName:"p"},"AEPIdentity.Identity.self"),"."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-swift"},"func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n     MobileCore.registerExtensions([Identity.self, ...], {\n       ...\n     })\n}\n")),(0,o.mdx)("h4",{id:"objective-c-1"},"Objective-C"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-objectivec"},"- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {\n [AEPMobileCore registerExtensions:@[AEPMobileIdentity.class, ...] completion:^{\n   ...\n }];\n return YES;\n}\n")),(0,o.mdx)(p,{platform:"android",task:"implement",repeat:"5",mdxType:"Variant"}),(0,o.mdx)("h4",{id:"java-2"},"Java"),(0,o.mdx)("p",null,"To append visitor information to the URL that is being used to open the web view, call ",(0,o.mdx)("a",{parentName:"p",href:"#appendtourl-appendvisitorinfoforurl"},"appendVisitorInfoForUrl"),":"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},'Identity.appendVisitorInfoForURL("https://example.com", new AdobeCallback<String>() {\n    @Override\n    public void call(String urlWithAdobeVisitorInfo) {\n        //handle the new URL here\n        //For example, open the URL on the device browser\n        //\n        Intent i = new Intent(Intent.ACTION_VIEW);\n        i.setData(Uri.parse(urlWithAdobeVisitorInfo));\n        startActivity(i);\n    }\n});\n')),(0,o.mdx)("p",null,"Alternately, starting in SDK version 1.4.0 (Identity version 1.1.0), you can call ",(0,o.mdx)("a",{parentName:"p",href:"#geturlvariables"},"getUrlVariables")," and build your own URL:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-java"},'Identity.getUrlVariables(new AdobeCallback<String>() {\n    @Override\n    public void call(String stringWithAdobeVisitorInfo) {\n        //handle the URL query parameter string here\n        //For example, open the URL on the device browser\n        //\n        Intent i = new Intent(Intent.ACTION_VIEW);\n        i.setData(Uri.parse("https://example.com?" + urlWithAdobeVisitorInfo));\n        startActivity(i);\n    }\n});\n')),(0,o.mdx)(p,{platform:"ios",task:"implement",repeat:"10",mdxType:"Variant"}),(0,o.mdx)("p",null,"To append visitor information to the URL that is being used to open the web view, call ",(0,o.mdx)("a",{parentName:"p",href:"./api-reference.md#appendtourl-appendvisitorinfoforurl"},"appendToUrl"),":"),(0,o.mdx)("h4",{id:"swift-2"},"Swift"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-swift"},'let url = URL(string: "https://example.com")\nIdentity.appendTo(url: url) { appendedUrl, error in\n    if error != nil {\n        // handle error here\n    } else {\n        // handle appended url here\n    }\n}\n')),(0,o.mdx)("h4",{id:"objective-c-2"},"Objective-C"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-objectivec"},'NSURL *sampleUrl = [NSURL URLWithString:@"https://example.com"];\n[AEPMobileIdentity appendToUrl:sampleUrl completion:^(NSURL * _Nullable appendedUrl, NSError *error) {\n    if (error != nil) {\n        // Handle error here\n    } else {\n        // Handle appended url here\n    }\n}];\n')),(0,o.mdx)("p",null,"Alternately, you can call ",(0,o.mdx)("a",{parentName:"p",href:"api-reference.md#geturlvariables"},"getUrlVariables")," and build your own URL:"),(0,o.mdx)("h4",{id:"swift-3"},"Swift"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-swift"},'Identity.getUrlVariables { urlVariables, error in\n    if error != nil {\n        // handle error here\n    } else {\n        if let url = URL(string: "https://example.com?\\(urlVariables ?? "")") {\n            DispatchQueue.main.async {\n                UIApplication.shared.open(url)\n            }\n        }\n    }\n}\n')),(0,o.mdx)("h4",{id:"objective-c-3"},"Objective-C"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-objectivec"},'[AEPMobileIdentity getUrlVariables:^(NSString * _Nullable urlVariables, NSError *error) {\n    NSString *sampleURLString = @"https://example.com";\n    if (error != nil) {\n        // Handle variables being nil\n    } else {\n        NSString *stringWithData = [NSString stringWithFormat:@"%@?%@", sampleURLString, urlVariables];\n        NSURL *appendedUrl = [NSURL URLWithString:stringWithData];\n        dispatch_async(dispatch_get_main_queue(), ^{\n            [[UIApplication sharedApplication] openURL:appendedUrl options:@{} completionHandler:nil];\n        });\n    }\n}];\n')))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-home-base-mobile-core-identity-index-md-ef095e20879f34995e61.js.map