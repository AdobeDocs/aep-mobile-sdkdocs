"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[415],{53190:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return o},default:function(){return x}});var n=a(87462),d=a(63366),r=(a(15007),a(64983)),i=a(91515),l=["components"],o={},m=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",t)}},s=m("InlineAlert"),p=m("BR"),c={_frontmatter:o},u=i.Z;function x(e){var t=e.components,a=(0,d.Z)(e,l);return(0,r.mdx)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"implementation"},"Implementation"),(0,r.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"While the Adobe Experience Platform SDK for WeChat Mini Program is complimentarily available for all Adobe customers, the SDK for the WeChat Mini Program requires in-country data collection. ",(0,r.mdx)("br",null),"Customers must purchase the China Performance Optimization Add-On for Adobe Analytics in order to use the SDK. Please contact your Adobe account team for further detail."),(0,r.mdx)("p",null,"To implement the Adobe Experience Platform SDK in your WeChat Mini Programs, complete the following steps:"),(0,r.mdx)("h2",{id:"1-add-the-sdk-to-your-project"},"1. Add the SDK to your project"),(0,r.mdx)("p",null,"In your Mini Program's ",(0,r.mdx)("inlineCode",{parentName:"p"},"app.js")," file, you can add the SDK by copying the following example:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"const AdobeSDK = require('AdobeSDK.js');\n")),(0,r.mdx)("h2",{id:"2-initialize-the-sdk"},"2. Initialize the SDK"),(0,r.mdx)("p",null,"In the ",(0,r.mdx)("inlineCode",{parentName:"p"},"onLaunch")," method of your ",(0,r.mdx)("inlineCode",{parentName:"p"},"app.js")," file, implement ",(0,r.mdx)("inlineCode",{parentName:"p"},"AdobeSDK.init()")," and pass in valid configuration values using the ",(0,r.mdx)("inlineCode",{parentName:"p"},".init(configuration)")," method. An example of that can be seen below:"),(0,r.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"If you need help to find the settings for your Adobe Analytics implementation, contact your Adobe Analytics administrator or Adobe consulting."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},'// App({\n//   onLaunch: function () {\n//     // 展示本地存储能力\n//     var logs = wx.getStorageSync(\'logs\') || []\n//     logs.unshift(Date.now())\n//     wx.setStorageSync(\'logs\', logs)\n     AdobeSDK.init({\n       "analytics.server": "example.sc.adobedc.cn",      //required\n       "analytics.rsids": "example.reportsuite",    //required\n       "app.id": "adobe-demo",                        //required\n       "app.version": "0.0.0.1",           //optional, default value = \'\'\n       "analytics.offlineEnabled": true,   //optional, default value = false\n       "session.timeout": 30               //optional, default value = 30\n     });\n// })\n')),(0,r.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"If the key ",(0,r.mdx)("inlineCode",{parentName:"p"},"analytics.offlineEnabled")," is set to true, then ",(0,r.mdx)("inlineCode",{parentName:"p"},"timestamp(ts)")," is included in the Adobe Analytics request.",(0,r.mdx)(p,{mdxType:"BR"}),"The key ",(0,r.mdx)("inlineCode",{parentName:"p"},"lifecycle.sessionTimeout")," represents the period, in seconds, that must elapse between the time the app is launched and before the launch is considered to be a new session. This timeout also applies when your application is sent to the background and reactivated. The default value is 30 seconds.",(0,r.mdx)(p,{mdxType:"BR"}),"To send data to multiple report suites, use commas to separate RSIDs in the configuration code block. For example: ",(0,r.mdx)("inlineCode",{parentName:"p"},'"analytics.rsids": "example.rsid1,example.rsid2"')," causes the SDK to send data to the ",(0,r.mdx)("inlineCode",{parentName:"p"},"example.rsid1")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"example.rsid2")," report suites."),(0,r.mdx)("p",null,"After being initialized, the SDK automatically collects and transmits lifecycle metrics to Adobe Analytics. For a complete list of metrics, please read ",(0,r.mdx)("em",{parentName:"p"},"Lifecycle metrics"),", below."),(0,r.mdx)("h2",{id:"3-enable-debug-logging"},"3. Enable debug logging"),(0,r.mdx)("h3",{id:"adobesdksetdebugloggingenabledflag"},"AdobeSDK.setDebugLoggingEnabled(flag)"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"AdobeSDK.setDebugLoggingEnabled(true)\n")),(0,r.mdx)("h3",{id:"adobesdksetdebugmodeenabledflag"},"AdobeSDK.setDebugModeEnabled(flag)"),(0,r.mdx)("p",null,"By default, the SDK hides internal exceptions and prints error messages in the console log. To allow the SDK to throw those exceptions, enable debug mode."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"AdobeSDK.setDebugModeEnabled(true)\n")),(0,r.mdx)("h2",{id:"4-track-screens-and-user-actions"},"4. Track screens and user actions"),(0,r.mdx)("p",null,"You can use the following screen and action tracking APIs to measure your user's engagement with your app."),(0,r.mdx)("h3",{id:"adobesdktrackactionactionname-contextdata"},"AdobeSDK.trackAction(actionName, contextData)"),(0,r.mdx)("p",null,"Actions are events that occur in your app. Use this API to track and measure an action, where each action has one or more corresponding metrics that increment each time the event occurs. For example, you can call this API for every new subscription, every time an article is viewed, or every time a level is completed."),(0,r.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"trackAction")," reports the action as an ",(0,r.mdx)("strong",{parentName:"p"},"event")," and does not increment your page views in Analytics. The value is sent to Analytics by using the action variable (",(0,r.mdx)("inlineCode",{parentName:"p"},"action=value"),")."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},'AdobeSDK.trackAction("action", { "example.key": "value" });\n')),(0,r.mdx)("h3",{id:"adobesdktrackstatestatename-contextdata"},"AdobeSDK.trackState(stateName, contextData)"),(0,r.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"In Analytics, ",(0,r.mdx)("inlineCode",{parentName:"p"},"trackState")," reports the view state as the ",(0,r.mdx)("strong",{parentName:"p"},"Page Name"),", and state views are reported as the ",(0,r.mdx)("strong",{parentName:"p"},"Page View"),". The value is sent to Adobe Analytics by using the page name variable (",(0,r.mdx)("inlineCode",{parentName:"p"},"pagename=value"),").",(0,r.mdx)(p,{mdxType:"BR"}),"To track when users switch to screens or pages, implement this API in the ",(0,r.mdx)("inlineCode",{parentName:"p"},"onShow")," method of the ",(0,r.mdx)("inlineCode",{parentName:"p"},"Page"),"."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},'AdobeSDK.trackState("state", { "example.key": "value" });\n')),(0,r.mdx)("h2",{id:"lifecycle-metrics"},"Lifecycle metrics"),(0,r.mdx)("p",null,"After the SDK is initialized, Lifecycle metrics are automatically sent to Adobe Analytics. A complete list of the metrics that are collected and sent can be found below:"),(0,r.mdx)("h3",{id:"install"},"Install"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Metric"),(0,r.mdx)("th",{parentName:"tr",align:null},"Key"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"First Launches"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.InstallEvent")),(0,r.mdx)("td",{parentName:"tr",align:null},"Triggered at first run after installation or re-installation.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Install Date"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.InstallDate")),(0,r.mdx)("td",{parentName:"tr",align:null},"Date of first launch after installation. The format is M/d/yyyy, and an example is 5/3/2021.")))),(0,r.mdx)("h3",{id:"upgrade"},"Upgrade"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Metric"),(0,r.mdx)("th",{parentName:"tr",align:null},"Key"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Upgrades"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.UpgradeEvent")),(0,r.mdx)("td",{parentName:"tr",align:null},"Triggered at the first run after upgrade or when the version number changes.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Days since last upgrade"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.DaysSinceLastUpgrade")),(0,r.mdx)("td",{parentName:"tr",align:null},"Number of days since the application version number changed.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Launches since last upgrade"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.LaunchesSinceUpgrade")),(0,r.mdx)("td",{parentName:"tr",align:null},"Number of launches since the application version number changed.")))),(0,r.mdx)("h3",{id:"launch"},"Launch"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Metric"),(0,r.mdx)("th",{parentName:"tr",align:null},"Key"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Daily Engaged Users"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.DailyEngUserEvent")),(0,r.mdx)("td",{parentName:"tr",align:null},"Triggered when the application is used on a particular day. ",(0,r.mdx)("strong",{parentName:"td"},"Important:")," This metric is ",(0,r.mdx)("strong",{parentName:"td"},"not")," automatically stored in Adobe Analytics. You must create a processing rule that sets a custom event to capture this metric.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Monthly Engaged Users"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.MonthlyEngUserEvent")),(0,r.mdx)("td",{parentName:"tr",align:null},"Triggered when the application is used during a particular month. ",(0,r.mdx)("strong",{parentName:"td"},"Important:")," This metric is ",(0,r.mdx)("strong",{parentName:"td"},"not")," automatically stored in Analytics. You must create a processing rule that sets a custom event to capture this metric.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Launches"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.LaunchEvent")),(0,r.mdx)("td",{parentName:"tr",align:null},"Triggered on every run, including crashes and installs. This value is also triggered when the app is resumed from the background after the lifecycle session timeout is exceeded.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Previous Session Length"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.PrevSessionLength")),(0,r.mdx)("td",{parentName:"tr",align:null},"Reports the number of seconds that a previous application session lasted, based on how long the application was open and in the foreground.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Launch Number"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.Launches")),(0,r.mdx)("td",{parentName:"tr",align:null},"The number of times the application was launched or brought out of the background.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Days since first use"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.DaysSinceFirstUse")),(0,r.mdx)("td",{parentName:"tr",align:null},"Number of days since the first run.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Days since last use"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.DaysSinceLastUse")),(0,r.mdx)("td",{parentName:"tr",align:null},"Number of days since the last use.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Hour of Day"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.HourOfDay")),(0,r.mdx)("td",{parentName:"tr",align:null},"Measures the hour the app was launched and uses the 24-hour numerical format. Used for time parting to determine peak usage times.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Day of Week"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.DayOfWeek")),(0,r.mdx)("td",{parentName:"tr",align:null},"Measures the day of the week the app was launched.")))),(0,r.mdx)("h3",{id:"device-information"},"Device information"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Metric"),(0,r.mdx)("th",{parentName:"tr",align:null},"Key"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"AppID"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.AppID")),(0,r.mdx)("td",{parentName:"tr",align:null},"Stores the application name and version in the AppName ",(0,r.mdx)("inlineCode",{parentName:"td"},"BundleVersion")," (app ",(0,r.mdx)("inlineCode",{parentName:"td"},"version code"),") format. An example of this format is ",(0,r.mdx)("inlineCode",{parentName:"td"},"MyAppName 1.1(1)"),". This value will be populated from the app ID provided in the SDK configuration.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},".Device name"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.DeviceName")),(0,r.mdx)("td",{parentName:"tr",align:null},"Stores the device name.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Operating system version"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.OSVersion")),(0,r.mdx)("td",{parentName:"tr",align:null},"Operating system name and version.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Resolution"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.Resolution")),(0,r.mdx)("td",{parentName:"tr",align:null},"Width x height, in pixels.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Run mode"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"a.RunMode")),(0,r.mdx)("td",{parentName:"tr",align:null},"The SDK running mode, for example, ",(0,r.mdx)("inlineCode",{parentName:"td"},"Application/Extension"))))),(0,r.mdx)("h2",{id:"5-validate-requests-to-adobe-analytics"},"5. Validate requests to Adobe Analytics"),(0,r.mdx)("p",null,"The following blurbs shows example of Adobe Analytics events:"),(0,r.mdx)("h3",{id:"lifecycle---install-event"},"Lifecycle - Install Event"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"ndh=1&c.&a.&OSVersion=iOS%2010.0.1&DeviceName=iPhone%207&Resolution=555x375&RunMode=Application&PlatformVersion=wechat-6.6.3&AppId=adobe-demo%20(0.0.0.2)&InstallEvent=InstallEvent&InstallDate=6%2F17%2F2019&LaunchEvent=LaunchEvent&PrevSessionLength=0&Launches=1&DaysSinceFirstUse=0&DaysSinceLastUse=0&MonthlyEngUserEvent=MonthlyEngUserEvent&DailyEngUserEvent=DailyEngUserEvent&HourOfDay=14&DayOfWeek=2&action=Lifecycle&TimeSinceLaunch=0&.a&.c&pe=lnk_o&pev2=ADBINTERNAL%3ALifecycle&pageName=adobe-demo%20(0.0.0.2)&aid=56025F971A9133B0-064362B2442D266E&ce=UTF-8&t=00%2F00%2F0000%2000%3A00%3A00%200%20360&ts=1560802302&cp=foreground\n")),(0,r.mdx)("h3",{id:"lifecycle---launch-event"},"Lifecycle - Launch Event"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"ndh=1&c.&a.&OSVersion=iOS%2010.0.1&DeviceName=iPhone%207&Resolution=555x375&RunMode=Application&PlatformVersion=wechat-6.6.3&AppId=adobe-demo%20(0.0.0.1)&LaunchEvent=LaunchEvent&PrevSessionLength=8&Launches=4&DaysSinceFirstUse=0&DaysSinceLastUse=0&HourOfDay=11&DayOfWeek=2&action=Lifecycle&TimeSinceLaunch=0&.a&.c&pe=lnk_o&pev2=ADBINTERNAL%3ALifecycle&pageName=adobe-demo%20(0.0.0.1)&aid=5B2BF542EAE66678-0E94474822B39961&ce=UTF-8&t=00%2F00%2F0000%2000%3A00%3A00%200%20360&ts=1560792653&cp=foreground\n")),(0,r.mdx)("h3",{id:"lifecycle---upgrade-event"},"Lifecycle - Upgrade Event"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"ndh=1&c.&a.&OSVersion=iOS%2010.0.1&DeviceName=iPhone%207&Resolution=555x375&RunMode=Application&PlatformVersion=wechat-6.6.3&AppId=adobe-demo%20(0.0.0.2)&UpgradeEvent=UpgradeEvent&DaysSinceLastUpgrade=0&LaunchesSinceUpgrade=1&LaunchEvent=LaunchEvent&PrevSessionLength=3&Launches=2&DaysSinceFirstUse=0&DaysSinceLastUse=0&HourOfDay=11&DayOfWeek=2&action=Lifecycle&TimeSinceLaunch=0&.a&.c&pe=lnk_o&pev2=ADBINTERNAL%3ALifecycle&pageName=adobe-demo%20(0.0.0.2)&aid=230EDCDE65A436D6-05BCD5A3D1105CA4&ce=UTF-8&t=00%2F00%2F0000%2000%3A00%3A00%200%20360&ts=1560792765&cp=foreground\n")),(0,r.mdx)("h3",{id:"trackaction"},"TrackAction"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"ndh=1&c.&a.&OSVersion=Android%205.0&DeviceName=Nexus%206&Resolution=610x412&RunMode=Application&PlatformVersion=wechat-6.6.3&AppId=adobe-demo%20(0.0.0.2)&action=Start&.a&example.&key=value&.example&.c&pe=lnk_o&pev2=AMACTION%3AStart&pageName=adobe-demo%20(0.0.0.2)&aid=2E85DEB17FFF8000-52245FFFDDC6DB5D&ce=UTF-8&t=00%2F00%2F0000%2000%3A00%3A00%200%20360&ts=1561063668&cp=foreground\n")),(0,r.mdx)("h3",{id:"trackstate"},"TrackState"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"ndh=1&c.&a.&OSVersion=Android%205.0&DeviceName=Nexus%206&Resolution=610x412&RunMode=Application&PlatformVersion=wechat-6.6.3&AppId=adobe-demo%20(0.0.0.2)&action=&TimeSinceLaunch=0&.a&.c&pageName=HomePage&aid=2E85DEB17FFF8000-52245FFFDDC6DB5D&ce=UTF-8&t=00%2F00%2F0000%2000%3A00%3A00%200%20360&ts=1561063668&cp=foreground\n")),(0,r.mdx)("h3",{id:"watch-the-video"},"Watch the video"),(0,r.mdx)("p",null,"For more information about WeChat Mini Programs SDK, watch the following video:"),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"https://video.tv.adobe.com/v/28355t1/?quality=9"},"Adobe Experience Platform SDK for WeChat Mini Programs")))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-documentation-platform-minis-implementation-md-5bbe3b3a31921580ef79.js.map