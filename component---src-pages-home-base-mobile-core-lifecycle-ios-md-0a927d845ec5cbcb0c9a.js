"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[6568],{68001:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return d},default:function(){return h}});var n,i=t(87462),r=t(63366),o=(t(15007),t(64983)),l=t(91515),s=["components"],d={},c=(n="InlineAlert",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",e)}),p={_frontmatter:d},m=l.Z;function h(e){var a=e.components,t=(0,r.Z)(e,s);return(0,o.mdx)(m,(0,i.Z)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"lifecycle-extension-in-ios"},"Lifecycle extension in iOS"),(0,o.mdx)(c,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"In version 4 of the iOS SDK, this implementation was completed automatically. ",(0,o.mdx)("br",null),(0,o.mdx)("br",null),"When upgrading to the Experience Platform SDK, you must add code to continue collecting Lifecycle metrics. For more information, see ",(0,o.mdx)("a",{parentName:"p",href:"../../../resources/upgrade-platform-sdks/lifecycle.md"},"Manual Lifecycle Implementation"),"."),(0,o.mdx)("h2",{id:"implementing-lifecycle-metrics-in-ios"},"Implementing Lifecycle metrics in iOS"),(0,o.mdx)("p",null,"For implementation details, please reference the guide on ",(0,o.mdx)("a",{parentName:"p",href:"../index.md#register-lifecycle-with-mobile-core-and-add-appropriate-start-pause-calls"},"registering Lifecycle with Mobile Core and adding the appropriate start/pause calls"),"."),(0,o.mdx)("h2",{id:"tracking-app-crashes-in-ios"},"Tracking app crashes in iOS"),(0,o.mdx)("p",null,"This information helps you understand how crashes are tracked and the best practices to handle false crashes."),(0,o.mdx)(c,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"You should upgrade to Adobe Experience Platform SDKs, which contains critical changes that prevent false crashes from being reported."),(0,o.mdx)("h3",{id:"how-does-crash-reporting-work"},"How does crash reporting work?"),(0,o.mdx)("p",null,"When creating a new lifecycle session, the SDK looks for a variable it maintains in ",(0,o.mdx)("inlineCode",{parentName:"p"},"NSUserDefaults")," that indicates the previous session was paused. If the flag is not set, then the ensuing launch will also be treated as a crash."),(0,o.mdx)("p",null,"The variable is controlled by calls to ",(0,o.mdx)("inlineCode",{parentName:"p"},"lifecyclePause")," (which sets the flag) and ",(0,o.mdx)("inlineCode",{parentName:"p"},"lifecycleStart")," (which clears the flag)."),(0,o.mdx)("h3",{id:"why-does-adobe-measure-crashes-this-way"},"Why does Adobe measure crashes this way?"),(0,o.mdx)("p",null,'This approach of measuring crashes provides a high-level answer to the question, "Did the user exit my app intentionally?"'),(0,o.mdx)("p",null,"Crash reporting libraries provided by companies such as Apteligent (formerly Crittercism) use a global ",(0,o.mdx)("inlineCode",{parentName:"p"},"NSException")," handler to provide more detailed crash reporting. Your app is not allowed to have more than one of these kinds of handlers. Adobe decided to not implement a global ",(0,o.mdx)("inlineCode",{parentName:"p"},"NSException")," handler to prevent build errors, knowing that our customers might be using other crash reporting providers."),(0,o.mdx)("h3",{id:"what-can-cause-a-false-crash-to-be-reported"},"What can cause a false crash to be reported?"),(0,o.mdx)("p",null,"The following scenarios are known to falsely cause a crash to be reported by the SDK:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"If you are debugging using Xcode, re-launching the app while it is running in the foreground will cause a crash.",(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},"You can avoid a crash in this scenario by backgrounding the app prior to re-launching the app from Xcode."))),(0,o.mdx)("li",{parentName:"ul"},"If your app is launched in the background because of an enabled background capability (e.g. - background fetch, location update), then ",(0,o.mdx)("inlineCode",{parentName:"li"},"lifecycleStart")," is called and the app never comes to the foreground, the next launch (whether in the background or foreground) will result in a crash."),(0,o.mdx)("li",{parentName:"ul"},"If you programmatically delete Adobe's pause flag from ",(0,o.mdx)("inlineCode",{parentName:"li"},"NSUserDefaults"),", while the app is in the background, the next launch or resume causes a crash.")),(0,o.mdx)("h3",{id:"how-can-i-prevent-false-crashes-from-being-reported"},"How can I prevent false crashes from being reported?"),(0,o.mdx)("p",null,"The following practices can help prevent false crashes from being reported:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Perform your development against non-production report suites to ensure there aren't false crashes from Xcode development."),(0,o.mdx)("li",{parentName:"ul"},"If your app has background capabilities, ensure that you are checking that the app is not in the background prior to calling ",(0,o.mdx)("inlineCode",{parentName:"li"},"lifecycleStart"),"."),(0,o.mdx)("li",{parentName:"ul"},"Do not delete or modify any values that the Experience Platform SDKs puts in ",(0,o.mdx)("inlineCode",{parentName:"li"},"NSUserDefaults"),". If these values are modified outside the SDK, the data reported will be invalid.")),(0,o.mdx)("h2",{id:"collecting-additional-data-with-lifecycle"},"Collecting additional data with Lifecycle"),(0,o.mdx)("p",null,"When calling ",(0,o.mdx)("inlineCode",{parentName:"p"},"lifecycleStart:"),", you can optionally pass a dictionary of additional data that will be attached to the lifecycle event."),(0,o.mdx)(c,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"You can pass additional data to lifecycle on app launch, app resume, both, or neither."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-swift"},'// Swift\nfunc applicationWillEnterForeground(_ application: UIApplication) {      \n     MobileCore.lifecycleStart(additionalContextData: ["contextDataKey": "contextDataVal"])\n}\n')),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-objectivec"},'// Objective-C\n- (void) applicationWillEnterForeground:(UIApplication *)application {      \n     [AEPMobileCore lifecycleStart:@{@"contextDataKey": @"contextDataVal"}];      \n}\n')))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-home-base-mobile-core-lifecycle-ios-md-0a927d845ec5cbcb0c9a.js.map