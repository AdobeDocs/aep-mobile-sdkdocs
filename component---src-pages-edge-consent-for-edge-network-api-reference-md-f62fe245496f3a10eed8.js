"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[4627,6682],{89368:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return m},default:function(){return N}});var a=t(87462),o=t(63366),s=(t(15007),t(64983)),l=t(91515),r=t(47968),d=t(44926),i=["components"],m={},p=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.mdx)("div",n)}},c=p("TabsBlock"),x=p("InlineAlert"),u={_frontmatter:m},g=l.Z;function N(e){var n=e.components,t=(0,o.Z)(e,i);return(0,s.mdx)(g,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"api-reference"},"API Reference"),(0,s.mdx)("h2",{id:"extensionversion"},"extensionVersion"),(0,s.mdx)("p",null,"The extensionVersion() API returns the version of the client-side Consent extension."),(0,s.mdx)(c,{orientation:"horizontal",slots:"heading, content",repeat:"2",mdxType:"TabsBlock"}),(0,s.mdx)("p",null,"Android"),(0,s.mdx)(d.default,{query:"platform=android&api=extension-version",mdxType:"Tabs"}),(0,s.mdx)("p",null,"iOS"),(0,s.mdx)(d.default,{query:"platform=ios&api=extension-version",mdxType:"Tabs"}),(0,s.mdx)("h2",{id:"getconsents"},"getConsents"),(0,s.mdx)("p",null,"Retrieves the current consent preferences stored in the Consent extension."),(0,s.mdx)(c,{orientation:"horizontal",slots:"heading, content",repeat:"2",mdxType:"TabsBlock"}),(0,s.mdx)("p",null,"Android"),(0,s.mdx)(d.default,{query:"platform=android&api=get-consents",mdxType:"Tabs"}),(0,s.mdx)("p",null,"iOS"),(0,s.mdx)(d.default,{query:"platform=ios&api=get-consents",mdxType:"Tabs"}),(0,s.mdx)("h2",{id:"registerextension"},"registerExtension"),(0,s.mdx)(r.default,{query:"platform=android-register-extension&componentClass=InlineNestedAlert",mdxType:"Alerts"}),(0,s.mdx)(c,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,s.mdx)("p",null,"Android"),(0,s.mdx)(d.default,{query:"platform=android&api=register-extension",mdxType:"Tabs"}),(0,s.mdx)("h2",{id:"updateconsents"},"updateConsents"),(0,s.mdx)("p",null,"Merges the existing consents with the given consents. Duplicate keys will take the value of those passed in the API."),(0,s.mdx)(c,{orientation:"horizontal",slots:"heading, content",repeat:"2",mdxType:"TabsBlock"}),(0,s.mdx)("p",null,"Android"),(0,s.mdx)(d.default,{query:"platform=android&api=update-consents",mdxType:"Tabs"}),(0,s.mdx)("p",null,"iOS"),(0,s.mdx)(d.default,{query:"platform=ios&api=update-consents",mdxType:"Tabs"}),(0,s.mdx)(x,{variant:"info",slots:"text1, text2, text3, text4, text5",mdxType:"InlineAlert"}),(0,s.mdx)("p",null,"When ",(0,s.mdx)("inlineCode",{parentName:"p"},"Consent.update")," API is called, the Consent extension uses Adobe Standard 2.0 to communicate with the Edge Network.  Additionally, the property ",(0,s.mdx)("inlineCode",{parentName:"p"},"metadata")," is set to the time at which the API is called."),(0,s.mdx)("p",null,"The following example shows when ",(0,s.mdx)("inlineCode",{parentName:"p"},"Consent.update")," is called to set collect consent to ",(0,s.mdx)("inlineCode",{parentName:"p"},"y"),":"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-swift"},'// Example in iOS (Swift),  updating user\'s collect consent to \'yes\'\nlet collectConsent = ["collect": ["val": "y"]]\nlet currentConsents = ["consents": collectConsent]\nConsent.update(with: currentConsents)\n')),(0,s.mdx)("p",null,"Bellow you can see the snippet of the request payload sent to the Edge Network:"),(0,s.mdx)("pre",null,(0,s.mdx)("code",{parentName:"pre",className:"language-json"},'    "consent": [\n        {\n        "standard": "Adobe",\n        "version": "2.0",\n        "value": {\n            "metadata": {\n            "time" : "2023-10-03T17:23:04.443Z"\n            },\n            "collect": {\n            "val": "y"\n            }\n          }\n        }\n     ]\n')),(0,s.mdx)("p",null,"For additional information about the management of consent preferences, please refer to the ",(0,s.mdx)("a",{parentName:"p",href:"../../resources/privacy-and-gdpr.md#using-experience-platform-sdks-for-edge-network"},"Privacy and GDPR documentation"),"."))}N.isMDXComponent=!0},44926:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return i},default:function(){return x}});var a,o=t(87462),s=t(63366),l=(t(15007),t(64983)),r=t(91515),d=["components"],i={},m=(a="Variant",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.mdx)("div",e)}),p={_frontmatter:i},c=r.Z;function x(e){var n=e.components,t=(0,s.Z)(e,d);return(0,l.mdx)(c,(0,o.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,l.mdx)(m,{platform:"android",api:"extension-version",repeat:"8",mdxType:"Variant"}),(0,l.mdx)("h4",{id:"java"},"Java"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"public static String extensionVersion();\n")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"String extensionVersion = Consent.extensionVersion();\n")),(0,l.mdx)("h4",{id:"kotlin"},"Kotlin"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"val extensionVersion = Consent.extensionVersion()\n")),(0,l.mdx)(m,{platform:"ios",api:"extension-version",repeat:"10",mdxType:"Variant"}),(0,l.mdx)("h4",{id:"swift"},"Swift"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},"static var extensionVersion: String\n")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},"let extensionVersion = Consent.extensionVersion\n")),(0,l.mdx)("h4",{id:"objective-c"},"Objective-C"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-objectivec"},"+ (nonnull NSString*) extensionVersion;\n")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-objectivec"},"NSString *extensionVersion = [AEPMobileEdgeConsent extensionVersion];\n")),(0,l.mdx)(m,{platform:"android",api:"get-consents",repeat:"9",mdxType:"Variant"}),(0,l.mdx)("h4",{id:"java-1"},"Java"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"public static void getConsents(final AdobeCallback<Map<String, Object>> callback);\n")),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("em",{parentName:"li"},"callback")," - callback invoked with the current consents of the extension. If an ",(0,l.mdx)("inlineCode",{parentName:"li"},"AdobeCallbackWithError")," is provided, an ",(0,l.mdx)("inlineCode",{parentName:"li"},"AdobeError"),", can be returned in the eventuality of any error that occurred while getting the user consents. The callback may be invoked on a different thread.")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"Consent.getConsents(new AdobeCallback<Map<String, Object>>() {\n    @Override\n    public void call(Map<String, Object> currentConsents) {\n        // Handle currentConsents\n    }\n});\n")),(0,l.mdx)("h4",{id:"kotlin-1"},"Kotlin"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"Consent.getConsents { currentConsents ->\n    // Handle currentConsents\n}\n")),(0,l.mdx)(m,{platform:"ios",api:"get-consents",repeat:"11",mdxType:"Variant"}),(0,l.mdx)("h4",{id:"swift-1"},"Swift"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},"static func getConsents(completion: @escaping ([String: Any]?, Error?) -> Void)\n")),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("em",{parentName:"li"},"completion")," - Invoked with the current consent preferences or an ",(0,l.mdx)("inlineCode",{parentName:"li"},"AEPError")," if an unexpected error occurs or the request timed out. It may be invoked on a different thread.")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},"Consent.getConsents { currentConsents, error in\n    // Handle currentConsents\n}\n")),(0,l.mdx)("h4",{id:"objective-c-1"},"Objective-C"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-objectivec"},"+ (void) getConsents:^ (NSDictionary<NSString *,id> * _Nullable, NSError * _Nullable)\n")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-objectivec"},"[AEPMobileEdgeConsent getConsents:^(NSDictionary *currentConsents, NSError *error){\n    // Handle currentConsents\n}];\n")),(0,l.mdx)(m,{platform:"android",api:"register-extension",repeat:"5",mdxType:"Variant"}),(0,l.mdx)("h4",{id:"java-2"},"Java"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"public static void registerExtension();\n")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"Consent.registerExtension();\n")),(0,l.mdx)(m,{platform:"ios",api:"register-extension",repeat:"12",mdxType:"Variant"}),(0,l.mdx)("h4",{id:"swift-2"},"Swift"),(0,l.mdx)("p",null,"Use the MobileCore API to register the Edge Consent extension."),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},"static func registerExtensions(_ extensions: [NSObject.Type], \n                               _ completion: (() -> Void)? = nil)\n")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},"import AEPEdgeConsent\n\n...\nMobileCore.registerExtensions([Consent.self])\n")),(0,l.mdx)("h4",{id:"objective-c-2"},"Objective-C"),(0,l.mdx)("p",null,"Use the AEPMobileCore API to register the Edge Consent extension."),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-objectivec"},"+ (void) registerExtensions: (NSArray<Class*>* _Nonnull) extensions \n                  completion: (void (^ _Nullable)(void)) completion;\n")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-objectivec"},"@import AEPEdgeConsent;\n\n...\n[AEPMobileCore registerExtensions:@[AEPMobileEdgeConsent.class] completion:nil];\n")),(0,l.mdx)(m,{platform:"android",api:"update-consents",repeat:"9",mdxType:"Variant"}),(0,l.mdx)("h4",{id:"java-3"},"Java"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"public static void update(final Map<String, Object> consents);\n")),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("em",{parentName:"li"},"consents")," - A ",(0,l.mdx)("inlineCode",{parentName:"li"},"Map")," of consents defined based on ",(0,l.mdx)("a",{parentName:"li",href:"https://github.com/adobe/xdm/blob/master/docs/reference/mixins/profile/profile-consents.schema.md"},"Privacy/Personalization/Marketing Preferences ","(","Consents",")"," XDM Schema"),".")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},'// Example 1, updating users collect consent to \'yes\'\nfinal Map<String, Object> collectConsents = new HashMap<>();\ncollectConsents.put("collect", new HashMap<String, String>() {\n    {\n        put("val", "y");\n    }\n});\n\nfinal Map<String, Object> consents = new HashMap<>();\nconsents.put("consents", collectConsents);\n\nConsent.update(consents);\n\n// Example 2, updating users collect consent to \'no\'\nfinal Map<String, Object> collectConsents = new HashMap<>();\ncollectConsents.put("collect", new HashMap<String, String>() {\n    {\n        put("val", "n");\n    }\n});\n\nfinal Map<String, Object> consents = new HashMap<>();\nconsents.put("consents", collectConsents);\n\nConsent.update(consents);\n')),(0,l.mdx)("h4",{id:"kotlin-2"},"Kotlin"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},'// Example 1, updating users collect consent to \'yes\'\nval collectConsents = mutableMapOf<String, Any>()\ncollectConsents["collect"] = mutableMapOf("val" to "y")\n\nval consents = mutableMapOf<String, Any>()\nconsents["consents"] = collectConsents\n\nConsent.update(consents)\n\n// Example 2, updating users collect consent to \'no\'\nval collectConsents = mutableMapOf<String, Any>()\ncollectConsents["collect"] = mutableMapOf("val" to "n")\n\nval consents = mutableMapOf<String, Any>()\nconsents["consents"] = collectConsents\n\nConsent.update(consents)\n')),(0,l.mdx)(m,{platform:"ios",api:"update-consents",repeat:"11",mdxType:"Variant"}),(0,l.mdx)("h4",{id:"swift-3"},"Swift"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},"static func update(with consents: [String: Any])\n")),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("em",{parentName:"li"},"consents")," - A ",(0,l.mdx)("inlineCode",{parentName:"li"},"[String: Any]")," of consents defined based on ",(0,l.mdx)("a",{parentName:"li",href:"https://github.com/adobe/xdm/blob/master/docs/reference/mixins/profile/profile-consents.schema.md"},"Privacy/Personalization/Marketing Preferences ","(","Consents",")"," XDM Schema"),".")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},'// Example 1, updating users collect consent to \'yes\'\nlet collectConsent = ["collect": ["val": "y"]]\nlet currentConsents = ["consents": collectConsent]\nConsent.update(with: currentConsents)\n\n// Example 2, updating users collect consent to \'no\'\nlet collectConsent = ["collect": ["val": "n"]]\nlet currentConsents = ["consents": collectConsent]\nConsent.update(with: currentConsents)\n')),(0,l.mdx)("h4",{id:"objective-c-3"},"Objective-C"),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Syntax")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-objectivec"},"+ (void) updateWithConsents:(NSDictionary<NSString *,id> * _Nonnull)\n")),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Example")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-objc"},'// Example 1, updating users collect consent to \'yes\'\nNSDictionary *collectConsent = @{ @"collect": @{@"val": @"y"};\n[AEPMobileEdgeConsent updateWithConsents:@{@"consents": collectConsent}];\n\n// Example 2, updating users collect consent to \'no\'\nNSDictionary *collectConsent = @{ @"collect": @{@"val": @"n"};\n[AEPMobileEdgeConsent updateWithConsents:@{@"consents": collectConsent}];\n')))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-edge-consent-for-edge-network-api-reference-md-f62fe245496f3a10eed8.js.map