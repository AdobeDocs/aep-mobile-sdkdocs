{"version":3,"file":"component---src-pages-edge-adobe-journey-optimizer-code-based-tutorial-md-0b05ac85aa7d0c161d61.js","mappings":"+TAOaA,EAAe,CAAC,EACvBC,EAAgB,SAAAC,GAAI,OAAI,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,4EAC5B,eAASC,EAClB,CAAC,EACKG,EAAYL,EAAc,aAC1BM,EAAcN,EAAc,eAC5BO,EAAc,CAClBR,aAAAA,GAEIS,EAAYC,EAAAA,EACH,SAASC,EAAW,GAGhC,IAFDC,EAAU,EAAVA,WACGT,GAAK,YAER,OAAO,SAACM,GAAS,UAAKD,EAAiBL,EAAK,CAAES,WAAYA,EAAYC,QAAQ,eAI5E,eACE,GAAM,kDAAgD,mDAExD,kJACA,eACE,GAAM,kBAAgB,mBAExB,mBAAG,cAAGC,WAAW,IACb,KAAQ,iDAA+C,8CACJ,kBACvD,eACE,GAAM,0CAAwC,2CAEhD,sHAAuG,cAAGA,WAAW,IACjH,KAAQ,qDAAmD,iCACrB,gDAAgD,cAAGA,WAAW,IACpG,KAAQ,gCAA8B,WACtB,4PACpB,SAACR,EAAS,CAACS,YAAY,aAAaC,MAAM,mBAAmBC,OAAO,IAAIJ,QAAQ,eAChF,8BACA,SAAC,UAAI,CAACK,MAAM,0DAA0DL,QAAQ,UAC9E,0BACA,SAAC,UAAI,CAACK,MAAM,sDAAsDL,QAAQ,UAC1E,eACE,GAAM,gCAA8B,iCAEtC,oGAAqF,cAAGC,WAAW,IAC/F,KAAQ,kDAAgD,8BACrB,8HAA8H,cAAGA,WAAW,IAC/K,KAAQ,oCAAkC,eACtB,yDAAyD,uBAAYA,WAAW,KAAG,YAA0B,gCACrI,SAACP,EAAW,CAACY,QAAQ,UAAUH,MAAM,OAAOH,QAAQ,iBACpD,wFAAyE,uBAAYC,WAAW,KAAG,8BAA4C,gBAAgB,uBAAYA,WAAW,KAAG,iCAA+C,8DACxO,kHACA,SAACR,EAAS,CAACS,YAAY,aAAaC,MAAM,mBAAmBC,OAAO,IAAIJ,QAAQ,eAChF,8BACA,SAAC,UAAI,CAACK,MAAM,uDAAuDL,QAAQ,UAC3E,0BACA,SAAC,UAAI,CAACK,MAAM,mDAAmDL,QAAQ,UACvE,eACE,GAAM,oCAAkC,qCAE1C,0BAAW,cAAGC,WAAW,IACrB,KAAQ,oCAAkC,eACtB,oMAAoM,uBAAYA,WAAW,KAAG,eAA6B,sIAAsI,uBAAYA,WAAW,KAAG,eAA6B,mEAAmE,cAAGA,WAAW,IAC7hB,KAAQ,yCAAuC,mBACvB,+GAA+G,uBAAYA,WAAW,KAAG,mBAAiC,qCAAqC,uBAAYA,WAAW,KAAG,eAA6B,UAAU,uBAAYA,WAAW,KAAG,cAA4B,YAAY,uBAAYA,WAAW,KAAG,mBAAiC,iIAAiI,uBAAYA,WAAW,KAAG,mBAAiC,yFACrmB,kQACA,SAACR,EAAS,CAACS,YAAY,aAAaC,MAAM,mBAAmBC,OAAO,IAAIJ,QAAQ,eAChF,8BACA,SAAC,UAAI,CAACK,MAAM,+CAA+CL,QAAQ,UACnE,0BACA,SAAC,UAAI,CAACK,MAAM,2CAA2CL,QAAQ,UAC/D,eACE,GAAM,qDAAmD,sDAE3D,mQAAoP,cAAGC,WAAW,IAC9P,KAAQ,+CAA6C,SACvC,yBAAyB,uBAAYA,WAAW,KAAG,mBAAiC,yVACtG,SAACR,EAAS,CAACS,YAAY,aAAaC,MAAM,mBAAmBC,OAAO,IAAIJ,QAAQ,eAChF,8BACA,SAAC,UAAI,CAACK,MAAM,kCAAkCL,QAAQ,UACtD,0BACA,SAAC,UAAI,CAACK,MAAM,8BAA8BL,QAAQ,UAClD,eACE,GAAM,0CAAwC,2CAEhD,wRAAyQ,uBAAYC,WAAW,KAAG,uBAAqC,0UACxU,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBAAe,sRAShC,uIAAwH,uBAAYA,WAAW,KAAG,qBAClJ,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBAAe,wTAQhC,8IAA+H,uBAAYA,WAAW,KAAG,mBAAiC,uIAAuI,cAAGA,WAAW,IAC3U,KAAQ,+CAA6C,SACvC,uTAClB,SAACR,EAAS,CAACS,YAAY,aAAaC,MAAM,mBAAmBC,OAAO,IAAIJ,QAAQ,eAChF,8BACA,SAAC,UAAI,CAACK,MAAM,8CAA8CL,QAAQ,UAClE,0BACA,SAAC,UAAI,CAACK,MAAM,0CAA0CL,QAAQ,SAGlE,CAEAF,EAAWS,gBAAiB,C","sources":["webpack://dev-site-documentation-template/./src/pages/edge/adobe-journey-optimizer/code-based/tutorial.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/aep-mobile-sdkdocs/aep-mobile-sdkdocs/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nimport Tabs from './tabs/tutorial.md';\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst TabsBlock = makeShortcode(\"TabsBlock\");\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"code-based-experiences-implementation-tutorial\"\n    }}>{`Code-based experiences implementation tutorial`}</h1>\n    <p>{`This document describes how to fetch, display and track code-based experiences using the Adobe Journey Optimizer extension.`}</p>\n    <h2 {...{\n      \"id\": \"pre-requisites\"\n    }}>{`Pre-requisites`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"../index.md#implement-extension-in-mobile-app\"\n      }}>{`Integrate and register Messaging extension`}</a>{` in your app.`}</p>\n    <h2 {...{\n      \"id\": \"fetch-and-cache-the-code-based-content\"\n    }}>{`Fetch and cache the code-based content`}</h2>\n    <p>{`To fetch the content for the surfaces configured in Adobe Journey Optimizer campaigns, call the `}<a parentName=\"p\" {...{\n        \"href\": \"../api-reference.md#updatepropositionsforsurfaces\"\n      }}>{`updatePropositionsForSurfaces`}</a>{` API . You should batch requesting multiple `}<a parentName=\"p\" {...{\n        \"href\": \"../public-classes/surface.md\"\n      }}>{`Surface`}</a>{` URIs in a single API call when possible. The returned code-based experiences are cached in-memory by the Messaging extension and persists through the lifecycle of the app (i.e as long as the app is running). An example of the call is shown below:`}</p>\n    <TabsBlock orientation=\"horizontal\" slots=\"heading, content\" repeat=\"2\" mdxType=\"TabsBlock\" />\n    <p>{`Android`}</p>\n    <Tabs query=\"platform=android&function=updatepropositionsforsurfaces\" mdxType=\"Tabs\" />\n    <p>{`iOS`}</p>\n    <Tabs query=\"platform=ios&function=updatepropositionsforsurfaces\" mdxType=\"Tabs\" />\n    <h2 {...{\n      \"id\": \"retrieve-cached-propositions\"\n    }}>{`Retrieve cached propositions`}</h2>\n    <p>{`To retrieve the previously fetched content from the in-memory cache, call the `}<a parentName=\"p\" {...{\n        \"href\": \"../api-reference.md#getpropositionsforsurfaces\"\n      }}>{`getPropositionsForSurfaces`}</a>{` API with a list of required surface URIs and a completion handler. The completion handler will be invoked with a list of `}<a parentName=\"p\" {...{\n        \"href\": \"../public-classes/proposition.md\"\n      }}>{`Proposition`}</a>{` objects corresponding to the requested surfaces, or `}<inlineCode parentName=\"p\">{`AEPError`}</inlineCode>{` object if an error occurs.`}</p>\n    <InlineAlert variant=\"warning\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`If a requested surface was not previously cached prior to calling `}<inlineCode parentName=\"p\">{`getPropositionsForSurfaces`}</inlineCode>{` (using the `}<inlineCode parentName=\"p\">{`updatePropositionsForSurfaces`}</inlineCode>{` API), no propositions will be returned for that surface.`}</p>\n    <p>{`The following example shows how to retrieve the content for the previously cached surfaces:`}</p>\n    <TabsBlock orientation=\"horizontal\" slots=\"heading, content\" repeat=\"2\" mdxType=\"TabsBlock\" />\n    <p>{`Android`}</p>\n    <Tabs query=\"platform=android&function=getpropositionsforsurfaces\" mdxType=\"Tabs\" />\n    <p>{`iOS`}</p>\n    <Tabs query=\"platform=ios&function=getpropositionsforsurfaces\" mdxType=\"Tabs\" />\n    <h2 {...{\n      \"id\": \"using-the-retrieved-propositions\"\n    }}>{`Using the retrieved propositions`}</h2>\n    <p>{`The `}<a parentName=\"p\" {...{\n        \"href\": \"../public-classes/proposition.md\"\n      }}>{`Proposition`}</a>{` object returned in the completion handler encapsulates the content specified for the corresponding surface, as well as information needed for tracking interactions with the content. Multiple `}<inlineCode parentName=\"p\">{`Proposition`}</inlineCode>{` objects can be returned for a single surface based on the number of campaigns configured for it in Adobe Journey Optimizer. Each `}<inlineCode parentName=\"p\">{`Proposition`}</inlineCode>{` object in turn can contain multiple items, represented by the `}<a parentName=\"p\" {...{\n        \"href\": \"../public-classes/proposition-item.md\"\n      }}>{`PropositionItem`}</a>{` class, based on how the campaign's content is defined. To access the content, iterate through the list of `}<inlineCode parentName=\"p\">{`PropositionItem`}</inlineCode>{` present in the returned list of `}<inlineCode parentName=\"p\">{`Proposition`}</inlineCode>{`. The `}<inlineCode parentName=\"p\">{`SchemaType`}</inlineCode>{` of the `}<inlineCode parentName=\"p\">{`PropositionItem`}</inlineCode>{` indicates the type of content it contains and can be used to determine how to render or interpret the returned content. The `}<inlineCode parentName=\"p\">{`PropositionItem`}</inlineCode>{` class contains helper functions to access the different types of supported content.`}</p>\n    <p>{`The following example shows how to iterate through the propositions returned earlier and retrieve the HTML content. Please adapt the solution to suit the needs of your application and use the returned proposition content appropriately.`}</p>\n    <TabsBlock orientation=\"horizontal\" slots=\"heading, content\" repeat=\"2\" mdxType=\"TabsBlock\" />\n    <p>{`Android`}</p>\n    <Tabs query=\"platform=android&function=using-propositions\" mdxType=\"Tabs\" />\n    <p>{`iOS`}</p>\n    <Tabs query=\"platform=ios&function=using-propositions\" mdxType=\"Tabs\" />\n    <h2 {...{\n      \"id\": \"tracking-interactions-with-code-based-experiences\"\n    }}>{`Tracking interactions with code-based experiences`}</h2>\n    <p>{`Since the onus of rendering the code-based experience lies with the app developer, you must monitor the desired end user interactions and call the appropriate tracking APIs. To record an interaction with the code-based content, call the `}<a parentName=\"p\" {...{\n        \"href\": \"../public-classes/proposition-item.md#track\"\n      }}>{`track`}</a>{` API provided in the `}<inlineCode parentName=\"p\">{`PropositionItem`}</inlineCode>{` class. The following code shows two examples of tracking: when the content is displayed to the user and when the user clicks on the content. These examples are for illustrating how to call the track API and not a recommendation on where it should be called. Please examine your app workflow to find the appropriate way to perform tracking.`}</p>\n    <TabsBlock orientation=\"horizontal\" slots=\"heading, content\" repeat=\"2\" mdxType=\"TabsBlock\" />\n    <p>{`Android`}</p>\n    <Tabs query=\"platform=android&function=track\" mdxType=\"Tabs\" />\n    <p>{`iOS`}</p>\n    <Tabs query=\"platform=ios&function=track\" mdxType=\"Tabs\" />\n    <h3 {...{\n      \"id\": \"tracking-items-from-embedded-decisions\"\n    }}>{`Tracking items from embedded decisions`}</h3>\n    <p>{`When Adobe Journey Optimizer campaigns are created with embedded decisions, the server can respond with one or more items based on the number of items requested in the decision. To track these embedded items, the Adobe Journey Optimizer campaign UI provides `}<inlineCode parentName=\"p\">{`item._trackingToken`}</inlineCode>{` attributes. When authoring the campaign's content, you would need to embed the provided token as an HTML data-attribute in case of HTML content or JSON attribute in case on JSON content. The following example campaign shows content with embedded decision, where multiple paragraph tags containing image URLs can be returned.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-html\"\n      }}>{`<html>\n   <body>\n      {{#each decisionPolicy.1234567.items as |item|}}\n      <ul id={{item._id}} data-item-token=\"{{item._trackingToken}}\"><img src=\"{{item.heroimage1.sourceURL}}\" alt=\"Winter Sale\" width=\"80%\" height=\"50%\"></ul>\n      {{/each}}\n   </body>\n</html>\n`}</code></pre>\n    <p>{`For the above example, the server can return a response with two decision items in the item data within a single `}<inlineCode parentName=\"p\">{`PropositionItem`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-html\"\n      }}>{`<html>\n   <body>\n      <ul id=\"mockId1\" data-item-token=\"mockToken1\"><img src=\"https://image1.jpeg\" alt=\"Winter Sale\" width=\"80%\" height=\"50%\"></ul>\n      <ul id=\"mockId2\" data-item-token=\"mockToken2\"><img src=\"https://image2.jpeg\" alt=\"Winter Sale\" width=\"80%\" height=\"50%\"></ul>\n   </body>\n</html>\n`}</code></pre>\n    <p>{`Since the embedded items are located inside a single PropositionItem's data, the app developer will need to extract the `}<inlineCode parentName=\"p\">{`data-item-token`}</inlineCode>{` when tracking the interactions with the item. The token, along with the other tracking information, will need to be passed to the `}<a parentName=\"p\" {...{\n        \"href\": \"../public-classes/proposition-item.md#track\"\n      }}>{`track`}</a>{` API provided by the Messaging SDK. If no tracking tokens are supplied, normal tracking events will be sent. If tracking tokens were used during authoring, it will be assumed that all the corresponding embedded items were displayed. The following code shows an example of calling the track API with tokens.`}</p>\n    <TabsBlock orientation=\"horizontal\" slots=\"heading, content\" repeat=\"2\" mdxType=\"TabsBlock\" />\n    <p>{`Android`}</p>\n    <Tabs query=\"platform=android&function=track-with-tokens\" mdxType=\"Tabs\" />\n    <p>{`iOS`}</p>\n    <Tabs query=\"platform=ios&function=track-with-tokens\" mdxType=\"Tabs\" />\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","makeShortcode","name","props","console","warn","TabsBlock","InlineAlert","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","orientation","slots","repeat","query","variant","isMDXComponent"],"sourceRoot":""}