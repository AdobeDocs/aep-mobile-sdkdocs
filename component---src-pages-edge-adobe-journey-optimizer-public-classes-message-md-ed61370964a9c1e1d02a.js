"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[8825],{38302:function(e,a,n){n.r(a),n.d(a,{_frontmatter:function(){return l},default:function(){return h}});var t=n(87462),i=n(63366),d=(n(15007),n(64983)),s=n(91515),r=n(56851),o=["components"],l={},m=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",a)}},p=m("TabsBlock"),u=m("InlineAlert"),c={_frontmatter:l},x=s.Z;function h(e){var a=e.components,n=(0,i.Z)(e,o);return(0,d.mdx)(x,(0,t.Z)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"message"},"Message"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message")," class contains the definition of an in-app message and controls its tracking via Experience Edge events."),(0,d.mdx)("h2",{id:"ios-interface---message"},"iOS Interface - Message"),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"Message")," objects are only created by the AEPMessaging extension, and passed as the ",(0,d.mdx)("inlineCode",{parentName:"p"},"message")," parameter in ",(0,d.mdx)("inlineCode",{parentName:"p"},"MessagingDelegate")," protocol methods."),(0,d.mdx)("h2",{id:"public-variables"},"Public variables"),(0,d.mdx)("h3",{id:"id"},"id"),(0,d.mdx)("p",null,"Identifier of the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message"),". This value matches the Message Execution ID assigned by Adobe Journey Optimizer (AJO) Campaign."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-swift"},"public var id: String\n")),(0,d.mdx)("h3",{id:"autotrack"},"autoTrack"),(0,d.mdx)("p",null,"If set to ",(0,d.mdx)("inlineCode",{parentName:"p"},"true")," (default), Experience Edge events will automatically be generated when this ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message")," is triggered, displayed, and dismissed."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-swift"},"public var autoTrack: Bool = true\n")),(0,d.mdx)("h3",{id:"view"},"view"),(0,d.mdx)("p",null,"Holds a reference to the message's ",(0,d.mdx)("inlineCode",{parentName:"p"},"WKWebView")," (iOS) or ",(0,d.mdx)("inlineCode",{parentName:"p"},"WebView")," (Android) instance, if it exists."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-swift"},"public var view: UIView? {\n    fullscreenMessage?.webView\n}\n")),(0,d.mdx)("h2",{id:"public-functions"},"Public functions"),(0,d.mdx)("h3",{id:"show"},"show"),(0,d.mdx)("p",null,"Signals to the UIService (in ",(0,d.mdx)("inlineCode",{parentName:"p"},"AEPServices"),") that the message should be shown."),(0,d.mdx)("p",null,"If ",(0,d.mdx)("inlineCode",{parentName:"p"},"autoTrack")," is true, calling this method will result in an ",(0,d.mdx)("inlineCode",{parentName:"p"},"decisioning.propositionTrigger")," Edge Event being dispatched."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-swift"},"public func show()\n")),(0,d.mdx)("h3",{id:"dismisssuppressautotrack"},"dismiss(suppressAutoTrack:)"),(0,d.mdx)("p",null,"Signals to the UIService that the message should be removed from the UI."),(0,d.mdx)("p",null,"If ",(0,d.mdx)("inlineCode",{parentName:"p"},"autoTrack")," is true, calling this method will result in an ",(0,d.mdx)("inlineCode",{parentName:"p"},"decisioning.propositionDismiss")," Edge Event being dispatched."),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"iOS"),(0,d.mdx)(r.default,{query:"platform=ios&function=dismiss",mdxType:"Tabs"}),(0,d.mdx)("h3",{id:"track_withedgeeventtype"},"track(_:withEdgeEventType:)"),(0,d.mdx)("p",null,"Generates and dispatches an Edge Event for the provided ",(0,d.mdx)("inlineCode",{parentName:"p"},"interaction")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"eventType"),"."),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"iOS"),(0,d.mdx)(r.default,{query:"platform=ios&function=track",mdxType:"Tabs"}),(0,d.mdx)("h3",{id:"handlejavascriptmessage_withhandler"},"handleJavascriptMessage(_:withHandler:)"),(0,d.mdx)("p",null,"Adds a handler for named JavaScript messages sent from the message's ",(0,d.mdx)("inlineCode",{parentName:"p"},"WKWebView"),"."),(0,d.mdx)("p",null,"The parameter passed to ",(0,d.mdx)("inlineCode",{parentName:"p"},"handler")," will contain the body of the message passed from the ",(0,d.mdx)("inlineCode",{parentName:"p"},"WKWebView"),"'s JavaScript."),(0,d.mdx)("p",null,"For a full guide on how to use ",(0,d.mdx)("inlineCode",{parentName:"p"},"handleJavascriptMessage"),", read ",(0,d.mdx)("a",{parentName:"p",href:"./tutorials/native-from-javascript.md"},"Call native code from the Javascript of an in-app message"),"."),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"iOS"),(0,d.mdx)(r.default,{query:"platform=ios&function=handle-javascript-message",mdxType:"Tabs"}),(0,d.mdx)("h2",{id:"android-interface---message"},"Android Interface - Message"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message")," class has the business logic related to the in-app message to perform actions like sending tracking events on interactions and suppress tracking. If your app implements ",(0,d.mdx)("inlineCode",{parentName:"p"},"PresentationDelegate"),", it will receive a ",(0,d.mdx)("inlineCode",{parentName:"p"},"Presentable")," object, which is the Mobile Core class containing in-app message view. You will need to get the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message")," object associated with ",(0,d.mdx)("inlineCode",{parentName:"p"},"Presentable")," object using  the ",(0,d.mdx)("inlineCode",{parentName:"p"},"MessagingUtils.getMessageForPresentable(Presentable)")," API. Refer to this ",(0,d.mdx)("a",{parentName:"p",href:"../in-app-message/tutorials/messaging-delegate.md"},"tutorial")," for more details."),(0,d.mdx)("h2",{id:"public-functions-1"},"Public functions"),(0,d.mdx)("h3",{id:"show-1"},"show"),(0,d.mdx)("p",null,"Signals to the UIService that the message should be shown."),(0,d.mdx)("p",null,"If ",(0,d.mdx)("inlineCode",{parentName:"p"},"autoTrack"),' is true, calling this method will result in an "decisioning.propositionDisplay" Edge Event being dispatched.'),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-java"},"void show()\n")),(0,d.mdx)("h3",{id:"dismiss"},"dismiss"),(0,d.mdx)(u,{variant:"warning",slots:"header, text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"This API has been changed in v3.0.0 of Adobe Journey Optimizer extension."),(0,d.mdx)("p",null,"In earlier versions, this API accepted a parameter ",(0,d.mdx)("inlineCode",{parentName:"p"},"suppressAutoTrack"),": If set to ",(0,d.mdx)("inlineCode",{parentName:"p"},"true"),", the ",(0,d.mdx)("inlineCode",{parentName:"p"},"decisioning.propositionDismiss")," Edge Event will not be sent regardless of the ",(0,d.mdx)("inlineCode",{parentName:"p"},"autoTrack")," setting."),(0,d.mdx)("p",null,"Signals to the UIService that the message should be removed from the UI."),(0,d.mdx)("p",null,"If ",(0,d.mdx)("inlineCode",{parentName:"p"},"autoTrack"),' is true, calling this method will result in an "decisioning.propositionDismiss" Edge Event being dispatched.'),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"Android"),(0,d.mdx)(r.default,{query:"platform=android&function=dismiss",mdxType:"Tabs"}),(0,d.mdx)("h3",{id:"track"},"track"),(0,d.mdx)("p",null,"Generates and dispatches an Edge Event for the provided ",(0,d.mdx)("inlineCode",{parentName:"p"},"interaction")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"eventType"),"."),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"Android"),(0,d.mdx)(r.default,{query:"platform=android&function=track",mdxType:"Tabs"}),(0,d.mdx)("h3",{id:"setautotrack"},"setAutoTrack"),(0,d.mdx)("p",null,"Sets the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message"),"'s auto tracking preference."),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"Android"),(0,d.mdx)(r.default,{query:"platform=android&function=set-auto-track",mdxType:"Tabs"}),(0,d.mdx)("h3",{id:"getautotrack"},"getAutoTrack"),(0,d.mdx)("p",null,"Returns the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message"),"'s auto tracking preference."),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"Android"),(0,d.mdx)(r.default,{query:"platform=android&function=get-auto-track",mdxType:"Tabs"}),(0,d.mdx)("h3",{id:"evaluatejavascript"},"evaluateJavascript"),(0,d.mdx)(u,{variant:"warning",slots:"header, text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"This API has been removed in v3.0.0 of Adobe Journey Optimizer extension."),(0,d.mdx)("p",null,"Migrate to  use ",(0,d.mdx)("inlineCode",{parentName:"p"},"PresentationDelegate")," and use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"InAppMessageEventHandler.evaluateJavascript(String, AdobeCallback)")," API instead. Refer to this ",(0,d.mdx)("a",{parentName:"p",href:"../in-app-message/tutorials/javascript-from-native/"},"tutorial")," for more details."),(0,d.mdx)("p",null,"Evaluates the passed in ",(0,d.mdx)("inlineCode",{parentName:"p"},"String")," content containing JavaScript code using the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message"),"'s webview. ",(0,d.mdx)("inlineCode",{parentName:"p"},"handleJavascriptMessage")," must be called with a valid callback before calling ",(0,d.mdx)("inlineCode",{parentName:"p"},"evaluateJavascript")," as the body of the message passed from the JavaScript code execution will be returned in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"AdobeCallback")," ."),(0,d.mdx)("p",null,"For a full guide on how to use ",(0,d.mdx)("inlineCode",{parentName:"p"},"handleJavascriptMessage"),", read the guide on ",(0,d.mdx)("a",{parentName:"p",href:"../in-app-message/tutorials/javascript-from-native.md"},"executing JavaScript methods from native code"),"."),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"Android"),(0,d.mdx)(r.default,{query:"platform=android&function=evaluate-javascript",mdxType:"Tabs"}),(0,d.mdx)("h3",{id:"handlejavascriptmessage"},"handleJavascriptMessage"),(0,d.mdx)(u,{variant:"warning",slots:"header, text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"This API has been removed in v3.0.0 of Adobe Journey Optimizer extension."),(0,d.mdx)("p",null,"Migrate to  use ",(0,d.mdx)("inlineCode",{parentName:"p"},"PresentationDelegate")," and use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"InAppMessageEventHandler.handleJavascriptMessage(String, AdobeCallback)")," API instead. Refer to this ",(0,d.mdx)("a",{parentName:"p",href:"../in-app-message/tutorials/native-from-javascript/"},"tutorial")," for more details."),(0,d.mdx)("p",null,"Adds a handler for named JavaScript messages sent from the message's ",(0,d.mdx)("inlineCode",{parentName:"p"},"WebView"),"."),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"AdobeCallback")," will contain the body of the message passed from the ",(0,d.mdx)("inlineCode",{parentName:"p"},"WebView"),"'s JavaScript."),(0,d.mdx)("p",null,"For a full guide on how to use ",(0,d.mdx)("inlineCode",{parentName:"p"},"handleJavascriptMessage"),", read the guide on ",(0,d.mdx)("a",{parentName:"p",href:"../in-app-message/tutorials/native-from-javascript/"},"calling native code from the Javascript of an in-app message"),"."),(0,d.mdx)(p,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,d.mdx)("p",null,"Android"),(0,d.mdx)(r.default,{query:"platform=android&function=handle-javascript-message",mdxType:"Tabs"}),(0,d.mdx)("h3",{id:"getid"},"getId"),(0,d.mdx)("p",null,"Returns the message's id."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-java"},"String getId()\n")),(0,d.mdx)("h3",{id:"getparent"},"getParent"),(0,d.mdx)(u,{variant:"warning",slots:"header, text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"This API has been removed in v3.0.0 of Adobe Journey Optimizer extension."),(0,d.mdx)("p",null,"Please use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"MessagingUtils.getMessageForPresentable(Presentable)")," API instead. Refer to this ",(0,d.mdx)("a",{parentName:"p",href:"../in-app-message/tutorials/messaging-delegate.md"},"tutorial")," for more details."),(0,d.mdx)("p",null,"Returns the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Object")," which created this ",(0,d.mdx)("inlineCode",{parentName:"p"},"Message"),"."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-java"},"Object getParent()\n")),(0,d.mdx)("h3",{id:"getwebview"},"getWebView"),(0,d.mdx)(u,{variant:"warning",slots:"header, text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"This API has been removed in v3.0.0 of Adobe Journey Optimizer extension."),(0,d.mdx)("p",null,"Functionality is no longer supported."),(0,d.mdx)("p",null,"Returns a reference to the message's ",(0,d.mdx)("inlineCode",{parentName:"p"},"WebView")," instance, if it exists."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-java"},"WebView getWebView()\n")))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-edge-adobe-journey-optimizer-public-classes-message-md-ed61370964a9c1e1d02a.js.map