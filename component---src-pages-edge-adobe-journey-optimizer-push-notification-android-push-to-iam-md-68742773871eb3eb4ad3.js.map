{"version":3,"file":"component---src-pages-edge-adobe-journey-optimizer-push-notification-android-push-to-iam-md-68742773871eb3eb4ad3.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/edge/adobe-journey-optimizer/push-notification/android/push-to-iam.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/aep-mobile-sdkdocs/aep-mobile-sdkdocs/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"display-an-in-message-on-push-notification-interaction\"\n    }}>{`Display an in-message on push notification interaction`}</h1>\n    <h2 {...{\n      \"id\": \"overview\"\n    }}>{`Overview`}</h2>\n    <p>{`This document describes the steps that allow a designated in-app message to be shown to an end user when they interact with a push notification to open the app.`}</p>\n    <h2 {...{\n      \"id\": \"pre-requisites\"\n    }}>{`Pre-requisites`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"../../../index.md#implement-extension-in-mobile-app\"\n      }}>{`Integrate and register Messaging extension`}</a>{` in your app.`}</p>\n    <h2 {...{\n      \"id\": \"add-a-trigger-in-the-in-app-message-campaign\"\n    }}>{`Add a trigger in the in-app message campaign`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`In the Journey Optimizer UI, select the Campaign for the in-app message that needs to be shown when a push notification is interacted with.`}</li>\n      <li parentName=\"ol\">{`Under the `}<strong parentName=\"li\">{`Triggers`}</strong>{` section, click on the `}<strong parentName=\"li\">{`Edit triggers`}</strong>{` button. Click on `}<strong parentName=\"li\">{`Add Condition`}</strong>{` and select the `}<strong parentName=\"li\">{`Manual trigger`}</strong>{` from the event dropdown. Click on `}<strong parentName=\"li\">{`Add Condition`}</strong>{` again and select `}<strong parentName=\"li\">{`Custom trait`}</strong>{` from the trait menu. Enter `}<inlineCode parentName=\"li\">{`adb_iam_id`}</inlineCode>{` as the key for the custom trait and an ID that uniquely identifies the in-app message as the value. Make a note of this ID as it will be used in the next section.`}</li>\n    </ol>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`The above rule to show the in-app message when the app is opened from a push notification interaction can be combined with existing trigger rules based on other events using an `}<strong parentName=\"p\">{`OR`}</strong>{` operator.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1280px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"53.125%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/5530d/iam-trigger-p2i.webp 320w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/0c8fb/iam-trigger-p2i.webp 640w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/94b1e/iam-trigger-p2i.webp 1280w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/0b34d/iam-trigger-p2i.webp 1920w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/d5269/iam-trigger-p2i.webp 2560w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/8acbc/iam-trigger-p2i.webp 3296w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/dd4a7/iam-trigger-p2i.png 320w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/0f09e/iam-trigger-p2i.png 640w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/bbbf7/iam-trigger-p2i.png 1280w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/ac7a9/iam-trigger-p2i.png 1920w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/c7a69/iam-trigger-p2i.png 2560w\", \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/7110f/iam-trigger-p2i.png 3296w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/aep-mobile-sdkdocs/static/6ad9da347aa79868664a22cf7c966d16/bbbf7/iam-trigger-p2i.png\",\n            \"alt\": \"In-app campaign trigger for Push-to-inapp\",\n            \"title\": \"In-app campaign trigger for Push-to-inapp\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <ol {...{\n      \"start\": 3\n    }}>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on `}<strong parentName=\"p\">{`Done`}</strong>{` to save the rule and review the changes by clicking on `}<strong parentName=\"p\">{`Review to activate`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on `}<strong parentName=\"p\">{`Request approval`}</strong>{` to activate the campaign.`}</p>\n      </li>\n    </ol>\n    <h2 {...{\n      \"id\": \"add-the-in-app-message-id-to-the-push-notification-data\"\n    }}>{`Add the in-app message ID to the push notification data`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`In the Journey Optimizer UI, select the Campaign for the Push notification which opens the app and shows the in-app message from the previous step.`}</li>\n      <li parentName=\"ol\">{`Click `}<strong parentName=\"li\">{`Edit content`}</strong>{` to modify the push notification payload. Under `}<strong parentName=\"li\">{`Custom data`}</strong>{` section, click on `}<strong parentName=\"li\">{`Add Key/Value Pair`}</strong>{`. Enter `}<inlineCode parentName=\"li\">{`adb_iam_id`}</inlineCode>{` in the key field and the unique in-app message ID from the previous section in the value field.`}</li>\n    </ol>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1056px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"35.625%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/aep-mobile-sdkdocs/static/7c32df98b4d75a833796e6c8c88671b3/5530d/push-custom-data-p2i.webp 320w\", \"/aep-mobile-sdkdocs/static/7c32df98b4d75a833796e6c8c88671b3/0c8fb/push-custom-data-p2i.webp 640w\", \"/aep-mobile-sdkdocs/static/7c32df98b4d75a833796e6c8c88671b3/dca56/push-custom-data-p2i.webp 1056w\"],\n            \"sizes\": \"(max-width: 1056px) 100vw, 1056px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/aep-mobile-sdkdocs/static/7c32df98b4d75a833796e6c8c88671b3/dd4a7/push-custom-data-p2i.png 320w\", \"/aep-mobile-sdkdocs/static/7c32df98b4d75a833796e6c8c88671b3/0f09e/push-custom-data-p2i.png 640w\", \"/aep-mobile-sdkdocs/static/7c32df98b4d75a833796e6c8c88671b3/cb866/push-custom-data-p2i.png 1056w\"],\n            \"sizes\": \"(max-width: 1056px) 100vw, 1056px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/aep-mobile-sdkdocs/static/7c32df98b4d75a833796e6c8c88671b3/cb866/push-custom-data-p2i.png\",\n            \"alt\": \"Push campaign custom data for Push-to-inapp\",\n            \"title\": \"Push campaign custom data for Push-to-inapp\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <ol {...{\n      \"start\": 3\n    }}>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on `}<strong parentName=\"p\">{`Review to activate`}</strong>{` to save the changes.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on `}<strong parentName=\"p\">{`Request approval`}</strong>{` to activate the campaign.`}</p>\n      </li>\n    </ol>\n    <h2 {...{\n      \"id\": \"add-the-data-from-messagingpushpayload-to-the-notification-intent-extras\"\n    }}>{`Add the data from `}<inlineCode parentName=\"h2\">{`MessagingPushPayload`}</inlineCode>{` to the notification intent extras`}</h2>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`This step can be skipped if your app is `}<a parentName=\"p\" {...{\n        \"href\": \"./automatic-display-and-tracking.md\"\n      }}>{`automatically displaying and tracking push notification using AEPMessaging extension`}</a>{`.`}</p>\n    <p>{`Call the `}<a parentName=\"p\" {...{\n        \"href\": \"./../../public-classes/messaging-push-payload.md#public-apis\"\n      }}>{`MessagingPushPayload.putDataInExtras(intent)`}</a>{` method to add the push notification data to the intent sent when the notification is clicked or cleared, depending on which action leads to the app to open and display of the in-app message. The following example shows how to add the `}<inlineCode parentName=\"p\">{`MessagingPushPayload`}</inlineCode>{` data to the push notification open and delete intents in a custom implementation of `}<inlineCode parentName=\"p\">{`FirebaseMessagingService`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`public class CustomNotificationService extends FirebaseMessagingService {\n\n    @Override\n    public void onMessageReceived(RemoteMessage message) {\n        super.onMessageReceived(message);\n\n        // code to create channelId\n\n        MessagingPushPayload payload = new MessagingPushPayload(message);\n\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this, channelId);\n\n        // code to build the notification UI\n\n        Intent contentIntent = new Intent(this, MainActivity.class);\n        if (message.getMessageId() != null) {\n            Messaging.addPushTrackingDetails(contentIntent, message.getMessageId(), message.getData());\n        }\n        // add MessagingPushPayload data to the intent sent when the notification is clicked\n        payload.putDataInExtras(contentIntent);\n        builder.setContentIntent(PendingIntent.getActivity(this, 0, contentIntent,\n                Build.VERSION.SDK_INT >= Build.VERSION_CODES.M ? PendingIntent.FLAG_IMMUTABLE : 0));\n\n        Intent deleteIntent = new Intent(this, MainActivity.class);\n        if (message.getMessageId() != null) {\n            Messaging.addPushTrackingDetails(deleteIntent, message.getMessageId(), message.getData());\n        }\n        // add MessagingPushPayload data to the intent sent when the notification is cleared from the notification panel \n        payload.putDataInExtras(deleteIntent);\n        builder.setDeleteIntent(PendingIntent.getBroadcast(this, 0, deleteIntent,\n                Build.VERSION.SDK_INT >= Build.VERSION_CODES.M ? PendingIntent.FLAG_IMMUTABLE : 0));\n\n        // code to display the notification\n    }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"track-push-notification-interaction\"\n    }}>{`Track push notification interaction`}</h2>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`This step can be skipped if your app is `}<a parentName=\"p\" {...{\n        \"href\": \"./automatic-display-and-tracking.md\"\n      }}>{`automatically displaying and tracking push notification using AEPMessaging extension`}</a>{`.`}</p>\n    <p>{`After the application is opened by the user by clicking on the push notification, verify push notification interaction is being tracked using `}<a parentName=\"p\" {...{\n        \"href\": \"./manual-display-and-tracking.md#tracking-push-notification-interactions\"\n      }}>{`handleNotificationResponse`}</a>{` API.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}