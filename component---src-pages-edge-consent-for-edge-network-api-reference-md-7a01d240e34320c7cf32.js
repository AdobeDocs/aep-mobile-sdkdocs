"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[4627,6682],{89368:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return p},default:function(){return f}});var a=t(87462),o=t(63366),l=(t(15007),t(64983)),r=t(91515),s=t(47968),m=t(44926),d=["components"],p={},i=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.mdx)("div",n)}},c=i("TabsBlock"),x=i("InlineAlert"),u={_frontmatter:p},g=r.Z;function f(e){var n=e.components,t=(0,o.Z)(e,d);return(0,l.mdx)(g,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"api-reference"},"API Reference"),(0,l.mdx)("h2",{id:"extensionversion"},"extensionVersion"),(0,l.mdx)("p",null,"The extensionVersion() API returns the version of the client-side Consent extension."),(0,l.mdx)(c,{orientation:"horizontal",slots:"heading, content",repeat:"4",mdxType:"TabsBlock"}),(0,l.mdx)("p",null,"Kotlin",(0,l.mdx)("br",null),"(Android)"),(0,l.mdx)(m.default,{query:"platform=kotlin&api=extension-version",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Java",(0,l.mdx)("br",null),"(Android)"),(0,l.mdx)(m.default,{query:"platform=java&api=extension-version",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Swift",(0,l.mdx)("br",null),"(iOS)"),(0,l.mdx)(m.default,{query:"platform=swift&api=extension-version",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Objective-C",(0,l.mdx)("br",null),"(iOS)"),(0,l.mdx)(m.default,{query:"platform=objc&api=extension-version",mdxType:"Tabs"}),(0,l.mdx)("h2",{id:"getconsents"},"getConsents"),(0,l.mdx)("p",null,"Retrieves the current consent preferences stored in the Consent extension."),(0,l.mdx)(c,{orientation:"horizontal",slots:"heading, content",repeat:"4",mdxType:"TabsBlock"}),(0,l.mdx)("p",null,"Kotlin",(0,l.mdx)("br",null),"(Android)"),(0,l.mdx)(m.default,{query:"platform=kotlin&api=get-consents",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Java",(0,l.mdx)("br",null),"(Android)"),(0,l.mdx)(m.default,{query:"platform=java&api=get-consents",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Swift",(0,l.mdx)("br",null),"(iOS)"),(0,l.mdx)(m.default,{query:"platform=swift&api=get-consents",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Objective-C",(0,l.mdx)("br",null),"(iOS)"),(0,l.mdx)(m.default,{query:"platform=objc&api=get-consents",mdxType:"Tabs"}),(0,l.mdx)("h2",{id:"registerextension"},"registerExtension"),(0,l.mdx)(s.default,{query:"platform=android-register-extension&componentClass=InlineNestedAlert",mdxType:"Alerts"}),(0,l.mdx)(c,{orientation:"horizontal",slots:"heading, content",repeat:"1",mdxType:"TabsBlock"}),(0,l.mdx)("p",null,"Java",(0,l.mdx)("br",null),"(Android)"),(0,l.mdx)(m.default,{query:"platform=java&api=register-extension",mdxType:"Tabs"}),(0,l.mdx)("h2",{id:"updateconsents"},"updateConsents"),(0,l.mdx)("p",null,"Merges the existing consents with the given consents. Duplicate keys will take the value of those passed in the API."),(0,l.mdx)(c,{orientation:"horizontal",slots:"heading, content",repeat:"4",mdxType:"TabsBlock"}),(0,l.mdx)("p",null,"Kotlin",(0,l.mdx)("br",null),"(Android)"),(0,l.mdx)(m.default,{query:"platform=kotlin&api=update-consents",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Java",(0,l.mdx)("br",null),"(Android)"),(0,l.mdx)(m.default,{query:"platform=java&api=update-consents",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Swift",(0,l.mdx)("br",null),"(iOS)"),(0,l.mdx)(m.default,{query:"platform=swift&api=update-consents",mdxType:"Tabs"}),(0,l.mdx)("p",null,"Objective-C",(0,l.mdx)("br",null),"(iOS)"),(0,l.mdx)(m.default,{query:"platform=objc&api=update-consents",mdxType:"Tabs"}),(0,l.mdx)(x,{variant:"info",slots:"text1",mdxType:"InlineAlert"}),(0,l.mdx)("p",null,"Since Android 3.0.2 and iOS 5.0.1, ",(0,l.mdx)("inlineCode",{parentName:"p"},"Consent.update")," requests ignore repeated updates that match current consent preferences when received within one second of the previous request."),(0,l.mdx)(x,{variant:"info",slots:"text1, text2, text3, text4, text5",mdxType:"InlineAlert"}),(0,l.mdx)("p",null,"When ",(0,l.mdx)("inlineCode",{parentName:"p"},"Consent.update")," API is called, the Consent extension uses Adobe Standard 2.0 to communicate with the Edge Network.  Additionally, the property ",(0,l.mdx)("inlineCode",{parentName:"p"},"metadata")," is set to the time at which the API is called."),(0,l.mdx)("p",null,"The following example shows when ",(0,l.mdx)("inlineCode",{parentName:"p"},"Consent.update")," is called to set collect consent to ",(0,l.mdx)("inlineCode",{parentName:"p"},"y"),":"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-swift"},'// Example in iOS (Swift),  updating user\'s collect consent to \'yes\'\nlet collectConsent = ["collect": ["val": "y"]]\nlet currentConsents = ["consents": collectConsent]\nConsent.update(with: currentConsents)\n')),(0,l.mdx)("p",null,"Bellow you can see the snippet of the request payload sent to the Edge Network:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'    "consent": [\n        {\n        "standard": "Adobe",\n        "version": "2.0",\n        "value": {\n            "metadata": {\n            "time" : "2023-10-03T17:23:04.443Z"\n            },\n            "collect": {\n            "val": "y"\n            }\n          }\n        }\n     ]\n')),(0,l.mdx)("p",null,"For additional information about the management of consent preferences, please refer to the ",(0,l.mdx)("a",{parentName:"p",href:"../../resources/privacy-and-gdpr.md#using-experience-platform-sdks-for-edge-network"},"Privacy and GDPR documentation"),"."))}f.isMDXComponent=!0},44926:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return x}});var a,o=t(87462),l=t(63366),r=(t(15007),t(64983)),s=t(91515),m=["components"],d={},p=(a="Variant",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",e)}),i={_frontmatter:d},c=s.Z;function x(e){var n=e.components,t=(0,l.Z)(e,m);return(0,r.mdx)(c,(0,o.Z)({},i,t,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)(p,{platform:"java",api:"extension-version",repeat:"4",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-java"},"public static String extensionVersion();\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-java"},"String extensionVersion = Consent.extensionVersion();\n")),(0,r.mdx)(p,{platform:"kotlin",api:"extension-version",repeat:"4",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-kotlin"},"fun extensionVersion(): String\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-kotlin"},"val extensionVersion = Consent.extensionVersion()\n")),(0,r.mdx)(p,{platform:"swift",api:"extension-version",repeat:"4",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},"static var extensionVersion: String\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},"let extensionVersion = Consent.extensionVersion\n")),(0,r.mdx)(p,{platform:"objc",api:"extension-version",repeat:"4",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-objectivec"},"+ (nonnull NSString*) extensionVersion;\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-objectivec"},"NSString *extensionVersion = [AEPMobileEdgeConsent extensionVersion];\n")),(0,r.mdx)(p,{platform:"java",api:"get-consents",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-java"},"public static void getConsents(final AdobeCallback<Map<String, Object>> callback);\n")),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("em",{parentName:"li"},"callback")," - Invoked with the current consent preferences. If an ",(0,r.mdx)("inlineCode",{parentName:"li"},"AdobeCallbackWithError")," is provided, an ",(0,r.mdx)("inlineCode",{parentName:"li"},"AdobeError")," is returned if any error occurs while retrieving the user consents. The callback may be invoked on a different thread.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-java"},"Consent.getConsents(new AdobeCallback<Map<String, Object>>() {\n    @Override\n    public void call(Map<String, Object> currentConsents) {\n        // Handle currentConsents\n    }\n});\n")),(0,r.mdx)(p,{platform:"kotlin",api:"get-consents",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-kotlin"},"fun getConsents(callback: AdobeCallback<Map<String, Any>>)\n")),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("em",{parentName:"li"},"callback")," - Invoked with the current consent preferences. If an ",(0,r.mdx)("inlineCode",{parentName:"li"},"AdobeCallbackWithError")," is provided, an ",(0,r.mdx)("inlineCode",{parentName:"li"},"AdobeError")," is returned if any error occurs while retrieving the user consents. The callback may be invoked on a different thread.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-kotlin"},"Consent.getConsents { currentConsents ->\n    // Handle currentConsents\n}\n")),(0,r.mdx)(p,{platform:"swift",api:"get-consents",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},"static func getConsents(completion: @escaping ([String: Any]?, Error?) -> Void)\n")),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("em",{parentName:"li"},"completion")," - Invoked with the current consent preferences or an ",(0,r.mdx)("inlineCode",{parentName:"li"},"AEPError")," if an error occurs or the request times out. The completion may be invoked on a different thread.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},"Consent.getConsents { currentConsents, error in\n    // Handle currentConsents\n}\n")),(0,r.mdx)(p,{platform:"objc",api:"get-consents",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-objectivec"},"+ (void) getConsents:^ (NSDictionary<NSString *,id> * _Nullable, NSError * _Nullable)\n")),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("em",{parentName:"li"},"completion")," - Invoked with the current consent preferences or an ",(0,r.mdx)("inlineCode",{parentName:"li"},"AEPError")," if an error occurs or the request times out. The completion may be invoked on a different thread.")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-objectivec"},"[AEPMobileEdgeConsent getConsents:^(NSDictionary *currentConsents, NSError *error){\n    // Handle currentConsents\n}];\n")),(0,r.mdx)(p,{platform:"java",api:"register-extension",repeat:"4",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-java"},"public static void registerExtension();\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-java"},"Consent.registerExtension();\n")),(0,r.mdx)(p,{platform:"swift",api:"register-extension",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,"Use the MobileCore API to register the Edge Consent extension."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},"static func registerExtensions(_ extensions: [NSObject.Type], \n                               _ completion: (() -> Void)? = nil)\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},"import AEPEdgeConsent\n\n...\nMobileCore.registerExtensions([Consent.self])\n")),(0,r.mdx)(p,{platform:"objc",api:"register-extension",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,"Use the AEPMobileCore API to register the Edge Consent extension."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-objectivec"},"+ (void) registerExtensions: (NSArray<Class*>* _Nonnull) extensions \n                  completion: (void (^ _Nullable)(void)) completion;\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-objectivec"},"@import AEPEdgeConsent;\n\n...\n[AEPMobileCore registerExtensions:@[AEPMobileEdgeConsent.class] completion:nil];\n")),(0,r.mdx)(p,{platform:"java",api:"update-consents",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-java"},"public static void update(final Map<String, Object> consents);\n")),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("em",{parentName:"li"},"consents")," - A ",(0,r.mdx)("inlineCode",{parentName:"li"},"Map")," of consents defined based on ",(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/xdm/blob/master/docs/reference/mixins/profile/profile-consents.schema.md"},"Privacy/Personalization/Marketing Preferences ","(","Consents",")"," XDM Schema"),".")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-java"},'// Example 1, updating users collect consent to \'yes\'\nfinal Map<String, Object> collectConsents = new HashMap<>();\ncollectConsents.put("collect", new HashMap<String, String>() {\n    {\n        put("val", "y");\n    }\n});\n\nfinal Map<String, Object> consents = new HashMap<>();\nconsents.put("consents", collectConsents);\n\nConsent.update(consents);\n\n// Example 2, updating users collect consent to \'no\'\nfinal Map<String, Object> collectConsents = new HashMap<>();\ncollectConsents.put("collect", new HashMap<String, String>() {\n    {\n        put("val", "n");\n    }\n});\n\nfinal Map<String, Object> consents = new HashMap<>();\nconsents.put("consents", collectConsents);\n\nConsent.update(consents);\n')),(0,r.mdx)(p,{platform:"kotlin",api:"update-consents",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-kotlin"},"fun update(consents: Map<String, Any>)\n")),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("em",{parentName:"li"},"consents")," - A ",(0,r.mdx)("inlineCode",{parentName:"li"},"Map")," of consents defined based on ",(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/xdm/blob/master/docs/reference/mixins/profile/profile-consents.schema.md"},"Privacy/Personalization/Marketing Preferences ","(","Consents",")"," XDM Schema"),".")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-kotlin"},'// Example 1, updating users collect consent to \'yes\'\nval collectConsents = mutableMapOf<String, Any>()\ncollectConsents["collect"] = mutableMapOf("val" to "y")\n\nval consents = mutableMapOf<String, Any>()\nconsents["consents"] = collectConsents\n\nConsent.update(consents)\n\n// Example 2, updating users collect consent to \'no\'\nval collectConsents = mutableMapOf<String, Any>()\ncollectConsents["collect"] = mutableMapOf("val" to "n")\n\nval consents = mutableMapOf<String, Any>()\nconsents["consents"] = collectConsents\n\nConsent.update(consents)\n')),(0,r.mdx)(p,{platform:"swift",api:"update-consents",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},"static func update(with consents: [String: Any])\n")),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("em",{parentName:"li"},"consents")," - A ",(0,r.mdx)("inlineCode",{parentName:"li"},"[String: Any]")," of consents defined based on ",(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/xdm/blob/master/docs/reference/mixins/profile/profile-consents.schema.md"},"Privacy/Personalization/Marketing Preferences ","(","Consents",")"," XDM Schema"),".")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-swift"},'// Example 1, updating users collect consent to \'yes\'\nlet collectConsent = ["collect": ["val": "y"]]\nlet currentConsents = ["consents": collectConsent]\nConsent.update(with: currentConsents)\n\n// Example 2, updating users collect consent to \'no\'\nlet collectConsent = ["collect": ["val": "n"]]\nlet currentConsents = ["consents": collectConsent]\nConsent.update(with: currentConsents)\n')),(0,r.mdx)(p,{platform:"objc",api:"update-consents",repeat:"5",mdxType:"Variant"}),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Syntax")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-objectivec"},"+ (void) updateWithConsents:(NSDictionary<NSString *,id> * _Nonnull)\n")),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("em",{parentName:"li"},"consents")," - A ",(0,r.mdx)("inlineCode",{parentName:"li"},"[String: Any]")," of consents defined based on ",(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/xdm/blob/master/docs/reference/mixins/profile/profile-consents.schema.md"},"Privacy/Personalization/Marketing Preferences ","(","Consents",")"," XDM Schema"),".")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Example")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-objc"},'// Example 1, updating users collect consent to \'yes\'\nNSDictionary *collectConsent = @{ @"collect": @{@"val": @"y"};\n[AEPMobileEdgeConsent updateWithConsents:@{@"consents": collectConsent}];\n\n// Example 2, updating users collect consent to \'no\'\nNSDictionary *collectConsent = @{ @"collect": @{@"val": @"n"};\n[AEPMobileEdgeConsent updateWithConsents:@{@"consents": collectConsent}];\n')))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-edge-consent-for-edge-network-api-reference-md-7a01d240e34320c7cf32.js.map